{"version":3,"sources":["uni-app:///main.js","webpack:///D:/Work/HB/BRP/pages/user/index.vue?c65d","webpack:///D:/Work/HB/BRP/pages/user/index.vue?aaac","webpack:///D:/Work/HB/BRP/pages/user/index.vue?95dd","webpack:///D:/Work/HB/BRP/pages/user/index.vue?e026","uni-app:///pages/user/index.vue","webpack:///D:/Work/HB/BRP/pages/user/index.vue?18da","webpack:///D:/Work/HB/BRP/pages/user/index.vue?0005"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","url","imageRootUrl","adminRootUrl","statusBarHeight","head_is_fixed","type","memberInfo","isGoodNightStory","memberCardEffectiveDateText","memberCardExpireDateText","days","totalCount","totalAmount","isLogin","maxBorrowQuantity","nickle","isBorrowBook","isClubActivity","isDelivery","isNightStory","nickname","IsShowGoodNightStory","components","popup","popupdialog","transition","onReady","onShow","that","onPageScroll","onLoad","methods","bindIsShowGoodNightStory","common","console","bindblur","clickUpdateNickle","dialogInputConfirm","uni","title","icon","duration","id","bindData","datas","GetNightStoryOrderCount","GetViewClubActivity","onChooseAvatar","filePath","name","success","headImageFileId","content","showCancel","clickToCategory","setTimeout","clickToserviceQRCode","clickToJionMember","clickToScoreRecord","clickToGoodNightStory","clickToActivity","clickToBookMark","clickToLoanableNotice","clickToLoanRecord","clickToSuspendCard","clickToMemberCardRecord","clickToRetailOrder","clickToQuit","authorizedLogin","filters","toImgPath","toScore","toAmount","toNull","tomemberCardCardNo"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AAC6M;AAC7M,gBAAgB,oNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,aAAa,8RAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpEA;AAAA;AAAA;AAAA;AAAozB,CAAgB,kzBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACiMx0B;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA;AACA;AAAA,eACA;EACAC;IACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;EACAC;IACA;MACA;IACA;MACA;MACAC;MACAA;MACAA;IACA;IACA;IACAA;EACA;EACAC;IACAD;EACA;EACAE;IACAF;EACA;EACAG;IACAC;MACA;MACAjC;MACAkC;QACAC;QACA;UACAN;QACA;UACAA;QACA;QACAM;MACA;IACA;IACAC;MACAP;MACAM;IACA;IACAE;MAAA;MACA;IACA;IACAC;MAAA;MACA;QACAC;UACAC;UACAC;UACAC;QACA;QACA;MACA;MACA;QACAC;QACAtB;MACA;;MACAc;MACAD;QACAK;UACAC;UACAC;UACAC;QACA;QACAb;MACA;IACA;IACAe;MACAT;MACA;MACAnC;MACAkC;QACAC;QACAN;QACAA;QACA;UACAA;QACA;QACA;UACAA;QACA;UACAA;QACA;QACA;UAAA;UACAA;QACA;UACAA,wFACA;UACA;UACA;UACA;UACA;UAEAA;UACAM;QACA;QAEA;UAAA;UACAN;QACA;UACAA,kFACA;UACA;UACA;UACA;UACA;UACAA;UACAM;QACA;QACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACAA;UACA;YACAN;UACA;YACAA;UACA;UACAM;QACA;QACA;UAAA;UACAN;QACA;UACAA;QACA;MACA;MACA;MACAgB;MACAX;QACAC;QACAN;QACAA;QACAA;QACAA;MACA;IACA;IACAiB;MAAA;MACA;MACA9C;MACAkC;QACA;UACAL;QACA;UACAA;QACA;MACA;IACA;IACAkB;MAAA;MACA;MACA/C;MACAkC;QACAC;QACAN;QACAA;MACA;IACA;IACAmB;MACA;MACA;MACAT;QACAtC;QACAgD;QACAC;QACAC;UACA;UACAhB;UACAA;UACAN;UACA;UACA;YACAc;YACAS;UACA;UACAlB;YACAK;cACAC;cACAa;cACAC;YACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MACAC;QACAjB;UACAtC;QACA;MACA;IACA;IACAwD;MAAA;MACAD;QACAjB;UACAtC;QACA;MACA;IACA;IACAyD;MAAA;MACAF;QACAjB;UACAtC;QACA;MACA;IACA;IACA0D;MAAA;MACA;MACA;QACA;MACA;MACAH;QACAjB;UACAtC;QACA;MACA;IACA;IACA2D;MAAA;MACA;QACA;MACA;MACA;MACA;QACA;MACA;MACAJ;QACAjB;UACAtC;QACA;MACA;IAEA;IACA4D;MAAA;MACA;MACA;QACA;MACA;MACAL;QACAjB;UACAtC;QACA;MACA;IAEA;IACA6D;MAAA;MACA;MACA;QACA;MACA;MACAN;QACAjB;UACAtC;QACA;MACA;IAEA;IACA8D;MAAA;MACA;MACA;QACA;MACA;MACAP;QACAjB;UACAtC;QACA;MACA;IAEA;IACA+D;MAAA;MACA;MACA;QACA;MACA;MACAR;QACAjB;UACAtC;QACA;MACA;IAEA;IACAgE;MAAA;MACA;MACA;QACA;MACA;MACAT;QACAjB;UACAtC;QACA;MACA;IAEA;IACAiE;MAAA;MACA;MACA;QACA;MACA;MACAV;QACAjB;UACAtC;QACA;MACA;IACA;IACAkE;MAAA;MACA;MACA;QACA;MACA;MACAX;QACAjB;UACAtC;QACA;MACA;IACA;IACAmE;MAAA;MACA;MACA;QACA;MACA;MACAvC;MACAA;MACAU;MACAA;MACAA;MACAA;MACA;QACA;MACA;QACA;QACAV;QACAA;QACAA;MACA;IACA;IACAwC;MAAA;;MAEA9B;QACAtC;MACA;IACA;EACA;EACAqE;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MAEA;QACA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC3mBA;AAAA;AAAA;AAAA;AAAugD,CAAgB,67CAAG,EAAC,C;;;;;;;;;;;ACA3hD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/user/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/user/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=137d5072&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user/index.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=137d5072&\"","var components\ntry {\n  components = {\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n      )\n    },\n    uniPopupDialog: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-popup-dialog/uni-popup-dialog\" */ \"@/components/uni-popup-dialog/uni-popup-dialog.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var f0 = _vm.isLogin\n    ? _vm._f(\"toImgPath\")(_vm.memberInfo.headImageFilePath)\n    : null\n  var f1 = _vm.isLogin ? _vm._f(\"toNull\")(_vm.memberInfo.nickname) : null\n  var f2 =\n    _vm.isLogin && _vm.type == \"member\"\n      ? _vm._f(\"toNull\")(_vm.memberInfo.name)\n      : null\n  var f3 =\n    _vm.isLogin && _vm.type == \"member\"\n      ? _vm._f(\"tomemberCardCardNo\")(_vm.memberInfo.memberCardCardNo)\n      : null\n  var f4 =\n    _vm.isLogin && _vm.type == \"member\"\n      ? _vm._f(\"toScore\")(_vm.memberInfo.score)\n      : null\n  var f5 = _vm.type == \"member\" ? _vm._f(\"toAmount\")(_vm.totalAmount) : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        f0: f0,\n        f1: f1,\n        f2: f2,\n        f3: f3,\n        f4: f4,\n        f5: f5,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"container\">\r\n\t\t\t<view v-if=\"isLogin\">\r\n\t\t\t\t<view class=\"line80\">\r\n\t\t\t\t\t<view class=\"line80\" style=\"float:left; \">\r\n\t\t\t\t\t\t<button class=\"avatar-wrapper\" open-type=\"chooseAvatar\" @chooseavatar=\"onChooseAvatar\">\r\n\t\t\t\t\t\t\t<image :src=\"memberInfo.headImageFilePath | toImgPath\"\r\n\t\t\t\t\t\t\t\tstyle=\"width: 80rpx; height: 80rpx; border-radius: 40rpx;\"></image>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line80 f28 c_white\" style=\"float:left; margin-left: 10rpx; font-weight: bold; display: flex;align-items: center;\">\r\n\t\t\t\t\t\t昵称：{{memberInfo.nickname | toNull}}<image src=\"../../static/image/common/updatenickle.png\"   style=\"width: 50rpx; height: 50rpx; margin-left: 20rpx;\" @click=\"clickUpdateNickle()\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- <input class=\"nickname\" type=\"nickname\" :value=\"memberInfo.name\" @blur=\"bindblur\" placeholder=\"请输入昵称\"/> -->\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"h40\" v-if=\"type=='member'\"></view>\r\n\t\t\t\t<view class=\"contentPanel\" v-if=\"type=='member'\"> <!-- 会员信息 -->\r\n\t\t\t\t\t<view class=\"h10\"></view>\r\n\t\t\t\t\t<view class=\"line220 userinfobb\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t<view class=\"left40\" style=\"float: left; \"> \r\n\t\t\t\t\t\t\t<view class=\"line45 f28\"><text class=\"f28 userinfotext\">会员:</text><text class=\"f28 userinfovaluetext\">{{memberInfo.name | toNull}}</text></view>\r\n\t\t\t\t\t\t\t<view class=\"line65 f28\"><text class=\"f28 userinfotext\">卡号:</text><text class=\"f28 userinfovaluetext\">{{memberInfo.memberCardCardNo | tomemberCardCardNo}}</text></view>\r\n\t\t\t\t\t\t\t<view class=\"line65 f28\"><text class=\"f28 userinfotext\">会员积分:</text><text class=\"f28 userinfovaluetext\">{{memberInfo.score | toScore}}</text></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"left60\" style=\"float: left; \">\r\n\t\t\t\t\t\t\t<view class=\"line45 f28 b center\">会员权益</view>\r\n\t\t\t\t\t\t\t<view class=\"line65\">\r\n\t\t\t\t\t\t\t\t<view class=\"line50 \" :class=\"isDelivery ?'userinfobtn':'noGoodNightStory'\" @click=\"clickToCategory()\">配送到家</view> \r\n\t\t\t\t\t\t\t\t<view class=\"line50 \" :class=\"isBorrowBook ?'userinfobtn':'noGoodNightStory'\" @click=\"clickToCategory()\">图书借阅</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"line65\">\r\n\t\t\t\t\t\t\t\t<view class=\"line50 \" :class=\"isClubActivity ?'userinfobtn':'noGoodNightStory'\" @click=\"clickToActivity()\">俱乐部会员</view> \r\n\t\t\t\t\t\t\t\t<view class=\"line50 \" :class=\"isNightStory ?'userinfobtn':'noGoodNightStory'\" @click=\"clickToGoodNightStory()\" >晚安故事</view> \r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"h10 clear\"></view>\r\n\t\t\t\t\t\t<view class=\"line30 f28\"><text class=\"f28 userinfotext\">服务商：</text><text\r\n\t\t\t\t\t\t\t\tclass=\"f28 userinfovaluetext\">{{memberInfo.companyName}}</text></view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"line60\">\r\n\t\t\t\t\t\t<view class=\"left50 starTime f24\">开卡时间：{{memberCardEffectiveDateText}}</view>\r\n\t\t\t\t\t\t<view class=\"left50 endTime  f24\">到期时间：{{memberCardExpireDateText}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line40\">\r\n\t\t\t\t\t\t<view class=\"left50 f24\"><text class=\"f24 userinfotext\">还能继续借阅：</text><text\r\n\t\t\t\t\t\t\t\tclass=\"f24 userinfovaluetext\">{{days}}天</text></view>\r\n\t\t\t\t\t\t<view class=\"left50 f24\"><text class=\"f24 userinfotext\">一次最多可借阅：</text><text\r\n\t\t\t\t\t\t\t\tclass=\"f24 userinfovaluetext\">{{maxBorrowQuantity}}本</text></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view v-else>\r\n\t\t\t\t<view class=\"contentPanel center\" @click=\"authorizedLogin()\">\r\n\t\t\t\t\t暂未登录，请先授权登录\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"h40\" v-if=\"type=='member'\"></view>\r\n\t\t\t<view class=\"contentPanel\" v-if=\"type=='member'\"> <!-- 借阅信息 -->\r\n\t\t\t\t<view class=\"line140\">\r\n\t\t\t\t\t<view class=\"left49 line80 onloanOrsavedPanel\">\r\n\t\t\t\t\t\t<view style=\"float: left;\">\r\n\t\t\t\t\t\t\t<image :src=\" imageRootUrl + '/image/member/onloan.png'\"\r\n\t\t\t\t\t\t\t\tstyle=\" width: 80rpx; height: 80rpx;\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"onloanTextPanel\">\r\n\t\t\t\t\t\t\t<view class=\"line40\"><text class=\"f36 onloantext\">{{totalCount}}</text><text\r\n\t\t\t\t\t\t\t\t\tclass=\"f24\">本</text></view>\r\n\t\t\t\t\t\t\t<view class=\"line40 f24\">已借阅</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"left1 line80 onloanOrsavedPanel bleft\"></view>\r\n\t\t\t\t\t<view class=\"left49 line80 onloanOrsavedPanel\">\r\n\t\t\t\t\t\t<view class=\"savedTextPanel\" style=\"float: right;\">\r\n\t\t\t\t\t\t\t<view class=\"line40\"><text class=\"f36 savedtext\">{{totalAmount | toAmount}}</text><text\r\n\t\t\t\t\t\t\t\t\tclass=\"f24\">元</text></view>\r\n\t\t\t\t\t\t\t<view class=\"line40 f24\">已节省买书费用</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view style=\"float: right;\">\r\n\t\t\t\t\t\t\t<image :src=\" imageRootUrl + '/image/member/saved.png'\"\r\n\t\t\t\t\t\t\t\tstyle=\" width: 80rpx; height: 80rpx;\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"h40\" v-if=\"type!='member'\"></view>\r\n\t\t\t<view class=\"contentPanel center\" v-if=\"type!='member'\" style=\"display: inline-block; width: 95%;\"\r\n\t\t\t\t@click=\"clickToJionMember()\">\r\n\t\t\t\t<image :src=\" imageRootUrl + '/image/member/vip.png'\" style=\"width: 240rpx; height: 228rpx;\"></image>\r\n\t\t\t\t<view class=\"joinMember\" style=\"\">加入会员</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"h40\"></view>\r\n\t\t\t<view class=\"contentPanel \"> <!-- 按钮 -->\r\n\t\t\t\t<view class=\"left33 h180\" v-if=\"type=='member'\" @click=\"clickToScoreRecord()\">\r\n\t\t\t\t\t<view class=\"line_130 center\">\r\n\t\t\t\t\t\t<image :src=\" imageRootUrl + '/image/member/jfmx.png'\" class=\"size100\"\r\n\t\t\t\t\t\t\tstyle=\" margin-top: 35rpx;\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line_50 center f28\">积分明细</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"left33 h180\"  @click=\"clickToActivity()\">\r\n\t\t\t\t\t<view class=\"line_130 center\">\r\n\t\t\t\t\t\t<image :src=\" imageRootUrl + '/image/member/jlb.png'\" class=\"size100\"\r\n\t\t\t\t\t\t\tstyle=\" margin-top: 35rpx;\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line_50 center f28\">俱乐部活动</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"left33 h180\"  @click=\"clickToGoodNightStory()\" v-if=\"IsShowGoodNightStory\">\r\n\t\t\t\t\t<view class=\"line_130 center\">\r\n\t\t\t\t\t\t<image :src=\" imageRootUrl + '/image/member/wags.png'\" class=\"size100\"\r\n\t\t\t\t\t\t\tstyle=\" margin-top: 35rpx;\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line_50 center f28\">晚安故事</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"left33 h180\" @click=\"clickToBookMark()\">\r\n\t\t\t\t\t<view class=\"line_130 center\">\r\n\t\t\t\t\t\t<image :src=\" imageRootUrl + '/image/member/sc.png'\" class=\"size100\"\r\n\t\t\t\t\t\t\tstyle=\" margin-top: 35rpx;\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line_50 center f28\">我的收藏</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"left33 h180\" v-if=\"type=='member'\" @click=\"clickToLoanableNotice()\">\r\n\t\t\t\t\t<view class=\"line_130 center\">\r\n\t\t\t\t\t\t<image :src=\" imageRootUrl + '/image/member/notice.png'\" class=\"size100\"\r\n\t\t\t\t\t\t\tstyle=\" margin-top: 35rpx;\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line_50 center f28\">可借通知</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"left33 h180\" v-if=\"type=='member'\" @click=\"clickToLoanRecord()\">\r\n\t\t\t\t\t<view class=\"line_130 center\">\r\n\t\t\t\t\t\t<image :src=\" imageRootUrl + '/image/member/jy.png'\" class=\"size100\"\r\n\t\t\t\t\t\t\tstyle=\" margin-top: 35rpx;\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line_50 center f28\">借阅记录</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"left33 h180\" v-if=\"type=='member'\" @click=\"clickToSuspendCard()\">\r\n\t\t\t\t\t<view class=\"line_130 center\">\r\n\t\t\t\t\t\t<image :src=\" imageRootUrl + '/image/member/tk.png'\" class=\"size100\"\r\n\t\t\t\t\t\t\tstyle=\" margin-top: 35rpx;\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line_50 center f28\">办理停卡</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"left33 h180\" v-if=\"type=='member'\" @click=\"clickToMemberCardRecord()\">\r\n\t\t\t\t\t<view class=\"line_130 center\">\r\n\t\t\t\t\t\t<image :src=\" imageRootUrl + '/image/member/bg.png'\" class=\"size100\"\r\n\t\t\t\t\t\t\tstyle=\" margin-top: 35rpx;\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line_50 center f28\">会员卡变更记录</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"left33 h180\"  @click=\"clickToRetailOrder()\">\r\n\t\t\t\t\t<view class=\"line_130 center\">\r\n\t\t\t\t\t\t<image :src=\" imageRootUrl + '/image/member/retailOrder.png'\" class=\"size100\"\r\n\t\t\t\t\t\t\tstyle=\" margin-top: 35rpx;\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line_50 center f28\">我的订单</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"left33 h180\"  @click=\"clickToQuit()\" v-if=\"isLogin == true\">\r\n\t\t\t\t\t<view class=\"line_130 center\">\r\n\t\t\t\t\t\t<image :src=\" imageRootUrl + '/image/member/quit.png'\" class=\"size100\"\r\n\t\t\t\t\t\t\tstyle=\" margin-top: 35rpx;\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line_50 center f28\">退出</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- <view class=\"joinMember\" style=\"\" @click=\"clickToserviceQRCode();\">加入会员</view> -->\r\n\t\t\t\t<view class=\"clear h30\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"h150\"></view>\r\n\t\t\t\r\n\t\t</view>\r\n\t\t<uni-popup ref=\"popup\" type=\"center\" >\r\n\t\t   <uni-popup-dialog ref=\"inputClose\" title=\"修改昵称\" @confirm=\"dialogInputConfirm\">\r\n\t\t        <view class=\"popupSty\">\r\n\t\t           <input class=\"nickname\" type=\"nickname\" v-model=\"nickname\"  placeholder=\"请输入昵称\" style=\"border: 1px solid #ddd; height: 80rpx; border-radius: 20rpx;\"/>\r\n\t\t        </view>\r\n\t\t    </uni-popup-dialog>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport common from \"@/js/common.js\";\r\n\timport config from \"@/js/config.js\";\r\n\timport util from \"@/js/util.js\";\r\n\t\r\n\timport popup from \"@/components/uni-popup/uni-popup.vue\";\r\n\timport popupdialog from \"@/components/uni-popup-dialog/uni-popup-dialog.vue\";\r\n\timport transition from \"@/components/uni-transition/uni-transition.vue\"; \r\n\tlet statusBarHeight = uni.getSystemInfoSync().statusBarHeight; // 状态栏 高度\r\n\tlet that = null;\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\turl: \"http://admin.8630.net/WYB/UploadFile/headerTopbg.png\",\r\n\t\t\t\timageRootUrl: config.imageRootUrl, //图片地址\r\n\t\t\t\tadminRootUrl: config.adminRootUrl + \"/\", //后端图片地址\r\n\t\t\t\tstatusBarHeight, // 状态栏 高度\r\n\t\t\t\thead_is_fixed: 0,\r\n\t\t\t\ttype: 'member', //类型为会员  member=会员    ordinary=普通用户\r\n\t\t\t\tmemberInfo: {}, //用户实体\r\n\t\t\t\tisGoodNightStory: false, //是否显示晚安故事权益\r\n\t\t\t\tmemberCardEffectiveDateText: '', //开卡时间\r\n\t\t\t\tmemberCardExpireDateText: '', //到期时间\r\n\t\t\t\tdays: 0, //还能继续借多少天\r\n\t\t\t\ttotalCount: 0, //已借阅多少本\r\n\t\t\t\ttotalAmount: 0, //已节省买书费用\r\n\t\t\t\tisLogin: false,\r\n\t\t\t\tmaxBorrowQuantity:0,\r\n\t\t\t\tnickle:'',\r\n\t\t\t\tisBorrowBook:false,//是否点亮图书借阅\r\n\t\t\t\tisClubActivity:false,//是否点亮俱乐部活动\r\n\t\t\t\tisDelivery:false,//是否点亮配送到家\r\n\t\t\t\tisNightStory:false,//是否点亮晚安故事\r\n\t\t\t\tnickname:'',//文本框里面的昵称\r\n\t\t\t\tIsShowGoodNightStory:false,//是否显示晚安故事\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomponents:{\r\n\t\t\tpopup,\r\n\t\t\tpopupdialog,\r\n\t\t\ttransition\r\n\t\t},\r\n\t\tonReady() {},\r\n\t\tonShow() {\r\n\t\t\tif (common.isLogin() == false) {\r\n\t\t\t\tthis.isLogin = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.isLogin = true;\r\n\t\t\t\tthat.bindData(); //\r\n\t\t\t\tthat.GetViewClubActivity(); //获取已借阅本数和以节省买书费用\r\n\t\t\t\tthat.GetNightStoryOrderCount(); //判断是否在晚安故事订阅过\r\n\t\t\t}\r\n\t\t\t// that.bindData(); //\r\n\t\t\tthat.bindIsShowGoodNightStory(); //绑定是否显示晚安故事\r\n\t\t},\r\n\t\tonPageScroll(e) {\r\n\t\t\tthat.head_is_fixed = e.scrollTop > 0 ? 1 : 0\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthat = this;\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tbindIsShowGoodNightStory(){\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tdata.code =\"IsShowGoodNightStory\"\r\n\t\t\t\tcommon.call(\"GetSysSetting\", data, function(result) {\r\n\t\t\t\t\tconsole.log(result.data)\r\n\t\t\t\t\tif(result.data.value == \"true\"){\r\n\t\t\t\t\t\tthat.IsShowGoodNightStory = true\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthat.IsShowGoodNightStory = false\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log(\"IsShowGoodNightStory：\"+that.IsShowGoodNightStory )\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tbindblur(e){\r\n\t\t\t\tthat.nickname = e.detail.value\r\n\t\t\t\tconsole.log(that.nickname)\r\n\t\t\t},\r\n\t\t\tclickUpdateNickle(){ //修改昵称\r\n\t\t\t\tthis.$refs.popup.open();\r\n\t\t\t},\r\n\t\t\tdialogInputConfirm(){ //修改昵称提交\r\n\t\t\t\tif(that.nickname ==null || that.nickname ==\"\"){\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请输入昵称',\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\tduration:1500\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tid:common.getMemberId(),\r\n\t\t\t\t\tnickname:that.nickname,//姓名\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\tcommon.call(\"UpdateMember\", data, function(result) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '修改成功！',\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\tduration:1500\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthat.bindData();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tbindData() {\r\n\t\t\t\tconsole.log(common.getMemberId())\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tdata.id = common.getMemberId();\r\n\t\t\t\tcommon.call(\"GetViewMember\", data, function(result) {\r\n\t\t\t\t\tconsole.log(result)\r\n\t\t\t\t\tthat.memberInfo = result.data;\r\n\t\t\t\t\tthat.nickname = that.memberInfo.nickname\r\n\t\t\t\t\tif(that.memberInfo.nickname ==null || that.memberInfo.nickname ==\"\"){\r\n\t\t\t\t\t\tthat.memberInfo.nickname = \"暂无昵称\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(that.memberInfo.memberCardMaxBorrowQuantity == null || that.memberInfo.memberCardMaxBorrowQuantity==\"\"){\r\n\t\t\t\t\t\tthat.maxBorrowQuantity = 0 + that.memberInfo.extendQuantity\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthat.maxBorrowQuantity = that.memberInfo.memberCardMaxBorrowQuantity + that.memberInfo.extendQuantity\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (result.data.memberCardEffectiveDateText == \"\" || result.data.memberCardEffectiveDateText == null) {  //开卡时间\r\n\t\t\t\t\t\tthat.memberCardEffectiveDateText = \"\"\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.memberCardEffectiveDateText = result.data.memberCardEffectiveDateText.substring(0,\r\n\t\t\t\t\t\t\t10) //开卡时间\r\n\t\t\t\t\t\tvar memberCardEffectiveDate = new Date(that.memberCardEffectiveDateText);\r\n\t\t\t\t\t\tvar year = memberCardEffectiveDate.getFullYear()\r\n\t\t\t\t\t\tvar month = memberCardEffectiveDate.getMonth() + 1\r\n\t\t\t\t\t\tvar day = memberCardEffectiveDate.getDate();\r\n\r\n\t\t\t\t\t\tthat.memberCardEffectiveDateText = year + \"年\" + month + \"月\" + day + \"日\"\r\n\t\t\t\t\t\tconsole.log(that.memberCardEffectiveDateText)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (result.data.memberCardExpireDateText == \"\" || result.data.memberCardExpireDateText == null) { //到期时间\r\n\t\t\t\t\t\tthat.memberCardExpireDateText = \"\"\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.memberCardExpireDateText = result.data.memberCardExpireDateText.substring(0,\r\n\t\t\t\t\t\t\t10) //到期时间\r\n\t\t\t\t\t\tvar memberCardExpireDate = new Date(that.memberCardExpireDateText);\r\n\t\t\t\t\t\tvar year1 = memberCardExpireDate.getFullYear()\r\n\t\t\t\t\t\tvar month1 = memberCardExpireDate.getMonth() + 1\r\n\t\t\t\t\t\tvar day1 = memberCardExpireDate.getDate();\r\n\t\t\t\t\t\tthat.memberCardExpireDateText = year1 + \"年\" + month1 + \"月\" + day1 + \"日\"\r\n\t\t\t\t\t\tconsole.log(that.memberCardExpireDateText)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (that.memberCardEffectiveDateText != \"\" && that.memberCardExpireDateText != \"\") {\r\n\t\t\t\t\t\t// let currentTime = new Date()\r\n\t\t\t\t\t\t// var date1  = Date.parse(new Date(currentTime));\r\n\t\t\t\t\t\t// var date2  = Date.parse(new Date(memberCardExpireDate));\r\n\t\t\t\t\t\t// var day = parseInt((date2-date1)/ (1000 * 60 * 60 * 24));//核心：时间戳相减，然后除以天数\r\n\t\t\t\t\t\t// console.log(day)\r\n\t\t\t\t\t\tvar date = new Date(memberCardExpireDate);\r\n\t\t\t\t\t\tvar time_diff = new Date(date).getTime() - new Date().getTime() ; //时间差的毫秒数 \r\n\t\t\t\t\t\t//计算出相差天数 \r\n\t\t\t\t\t\t// var days = Math.floor(time_diff / (24 * 3600 * 1000)); // 向下取整   2025年8月29日  -   2024年8月29日 相差天数：364\r\n\t\t\t\t\t\tvar day = Math.ceil(time_diff / (24 * 3600 * 1000)); //向上取整  2025年8月29日  -   2024年8月29日 相差天数：365\r\n\t\t\t\t\t\tconsole.log(day)\r\n\t\t\t\t\t\tif(day > 0 ){\r\n\t\t\t\t\t\t\tthat.days = day\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthat.days = 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log(day)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (that.memberInfo.memberCardCardNo != null && that.memberInfo.memberCardCardNo != \"\") { //type:'member',//类型为会员  member=会员    ordinary=普通用户\r\n\t\t\t\t\t\tthat.type = \"member\"\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.type = \"ordinary\"\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tvar datas = {};\r\n\t\t\t\tdatas.memberId = common.getMemberId();\r\n\t\t\t\tcommon.call(\"GetMemberPermission\", datas, function(result) {\r\n\t\t\t\t\tconsole.log(result.data)\r\n\t\t\t\t\tthat.isBorrowBook =result.data.isBorrowBook//是否点亮图书借阅\r\n\t\t\t\t\tthat.isClubActivity=result.data.isClubActivity//是否点亮俱乐部活动\r\n\t\t\t\t\tthat.isDelivery=result.data.isDelivery//是否点亮配送到家\r\n\t\t\t\t\tthat.isNightStory=result.data.isNightStory//是否点亮晚安故事\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tGetNightStoryOrderCount() { ////判断是否在晚安故事订阅过\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tdata.memberId = common.getMemberId()\r\n\t\t\t\tcommon.call(\"GetNightStoryOrderCount\", data, function(result) {\r\n\t\t\t\t\tif (result.data.dataList[0].count > 0) {\r\n\t\t\t\t\t\tthat.isGoodNightStory = true\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.isGoodNightStory = false\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tGetViewClubActivity() { //获取已借阅本数和以节省买书费用\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tdata.memberId = common.getMemberId();\r\n\t\t\t\tcommon.call(\"GetBorrowReport\", data, function(result) {\r\n\t\t\t\t\tconsole.log(result)\r\n\t\t\t\t\tthat.totalCount = result.data.dataList[0].totalCount\r\n\t\t\t\t\tthat.totalAmount = result.data.dataList[0].totalAmount\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tonChooseAvatar(e) {\r\n\t\t\t\t// this.uploadFilePromise(e.detail.avatarUrl)\r\n\t\t\t\t// console.log(e)\r\n\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\turl: config.serviceUrl + \"?serviceName=UploadFile\",\r\n\t\t\t\t\tfilePath: e.detail.avatarUrl,\r\n\t\t\t\t\tname: 'file',\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tvar result = JSON.parse(res.data);\r\n\t\t\t\t\t\tconsole.log(result.data);\r\n\t\t\t\t\t\tconsole.log(result.data.path);\r\n\t\t\t\t\t\tthat.memberInfo.headImageFilePath = result.data.path\r\n\t\t\t\t\t\tvar result = JSON.parse(res.data);\r\n\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\tid: common.getMemberId(), \r\n\t\t\t\t\t\t\theadImageFileId: result.data.id,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tcommon.call(\"UpdateMember\", data, result => {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\tcontent: \"上传成功！\",\r\n\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tclickToCategory(){//跳转分类\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\turl: \"/pages/category/index\" \r\n\t\t\t\t\t})\r\n\t\t\t\t}, 100);\r\n\t\t\t},\r\n\t\t\tclickToserviceQRCode() { //跳转加入会员\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: 'serviceQRCode'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 200);\r\n\t\t\t},\r\n\t\t\tclickToJionMember() { //跳转加入会员\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: 'joinMember'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 200);\r\n\t\t\t},\r\n\t\t\tclickToScoreRecord() { //跳转积分记录\r\n\t\t\t\tvar isValid = common.checkLogin();\r\n\t\t\t\tif (!isValid) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: 'scoreRecord'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 200);\r\n\t\t\t},\r\n\t\t\tclickToGoodNightStory() { //跳转晚安故事\r\n\t\t\t\tif(!that.IsShowGoodNightStory){\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tvar isValid = common.checkLogin();\r\n\t\t\t\tif (!isValid) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: 'goodNightStory'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 200);\r\n\r\n\t\t\t},\r\n\t\t\tclickToActivity() { //跳转俱乐部活动\r\n\t\t\t\tvar isValid = common.checkLogin();\r\n\t\t\t\tif (!isValid) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: 'activity'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 200);\r\n\r\n\t\t\t},\r\n\t\t\tclickToBookMark() { //跳转我的收藏\r\n\t\t\t\tvar isValid = common.checkLogin();\r\n\t\t\t\tif (!isValid) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: 'bookMark'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 200);\r\n\r\n\t\t\t},\r\n\t\t\tclickToLoanableNotice() { //跳转可借通知\r\n\t\t\t\tvar isValid = common.checkLogin();\r\n\t\t\t\tif (!isValid) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: 'loanableNotice'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 200);\r\n\r\n\t\t\t},\r\n\t\t\tclickToLoanRecord() { //跳转到借阅记录\r\n\t\t\t\tvar isValid = common.checkLogin();\r\n\t\t\t\tif (!isValid) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: 'loanRecord'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 200);\r\n\r\n\t\t\t},\r\n\t\t\tclickToSuspendCard() { //跳转到办理停卡\r\n\t\t\t\tvar isValid = common.checkLogin();\r\n\t\t\t\tif (!isValid) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: 'suspendCard'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 200);\r\n\r\n\t\t\t},\r\n\t\t\tclickToMemberCardRecord() { //跳转到会员卡变更记录\r\n\t\t\t\tvar isValid = common.checkLogin();\r\n\t\t\t\tif (!isValid) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: 'memberCardRecord'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 200);\r\n\t\t\t},\r\n\t\t\tclickToRetailOrder(){ //跳转到我的订单\r\n\t\t\t\tvar isValid = common.checkLogin();\r\n\t\t\t\tif (!isValid) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: 'retailOrder'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 200);\r\n\t\t\t},\r\n\t\t\tclickToQuit(){ //退出\r\n\t\t\t\tvar isValid = common.checkLogin();\r\n\t\t\t\tif (!isValid) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthat.totalCount= 0 //已借阅多少本\r\n\t\t\t\tthat.totalAmount= 0 //已节省买书费用\r\n\t\t\t\tuni.removeStorageSync(\"memberId\");\r\n\t\t\t\tuni.removeStorageSync(\"companyId\");\r\n\t\t\t\tuni.removeStorageSync(\"wxOpenId\");\r\n\t\t\t\tuni.removeStorageSync(\"mobilePhone\");\r\n\t\t\t\tif (common.isLogin() == false) {\r\n\t\t\t\t\tthis.isLogin = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.isLogin = true;\r\n\t\t\t\t\tthat.bindData(); //\r\n\t\t\t\t\tthat.GetViewClubActivity(); //获取已借阅本数和以节省买书费用\r\n\t\t\t\t\tthat.GetNightStoryOrderCount(); //判断是否在晚安故事订阅过\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tauthorizedLogin() { //授权登录\r\n\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/common/login'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\ttoImgPath: function(value) {\r\n\t\t\t\tif (value == null || value == \"\") {\r\n\t\t\t\t\treturn \"/static/image/common/uploadImage.jpg\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn that.adminRootUrl + value;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttoScore: function(value) {\r\n\t\t\t\tif (value == null || value == \"\") {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttoAmount: function(value) {\r\n\t\t\t\tif (value == null || value == \"\") {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttoNull(val){\r\n\t\t\t\tif(val ==null){\r\n\t\t\t\t\treturn \"\"\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn val\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttomemberCardCardNo(val){\r\n\t\t\t\t\r\n\t\t\t\tif(val ==null){\r\n\t\t\t\t\treturn \"\"\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(val.length >= 12){\r\n\t\t\t\t\t\treturn val.substring(0,12) +\"..\"\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn val\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import url(\"/css/common.css\");\r\n\r\n\tpage {\r\n\t\tbackground: #5EAC59;\r\n\t}\r\n\r\n\t.container {}\r\n\r\n\t.userinfobb {\r\n\t\tborder-bottom: 1rpx solid #F3F3F3;\r\n\t}\r\n\r\n\t.userinfotext {\r\n\t\tcolor: #999999;\r\n\t}\r\n\r\n\t.userinfovaluetext {\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.userinfobtn {\r\n\t\twidth: 180rpx;\r\n\t\theight: 50rpx;\r\n\t\tbackground: #FACC3F;\r\n\t\tborder-radius: 12rpx;\r\n\t\topacity: 1;\r\n\t\tfont-size: 23rpx;\r\n\t\ttext-align: center;\r\n\t\tline-height: 50rpx;\r\n\t\tmargin-top: 7rpx;\r\n\t\tfloat: right;\r\n\t\tmargin-left: 10rpx;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.noGoodNightStory {\r\n\t\twidth: 180rpx;\r\n\t\theight: 50rpx;\r\n\t\tbackground: #c1c1c1;\r\n\t\tcolor: white;\r\n\t\tborder-radius: 12rpx;\r\n\t\topacity: 1;\r\n\t\tfont-size: 23rpx;\r\n\t\ttext-align: center;\r\n\t\tline-height: 50rpx;\r\n\t\tmargin-top: 7rpx;\r\n\t\tfloat: right;\r\n\t\tmargin-left: 10rpx;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.starTime {\r\n\t\tcolor: #53D776;\r\n\t}\r\n\r\n\t.endTime {\r\n\t\tcolor: #FE613D;\r\n\t}\r\n\r\n\t.onloanOrsavedPanel {\r\n\t\tmargin-top: 30rpx;\r\n\t}\r\n\r\n\t.bleft {\r\n\t\tborder-left: 1px solid #F3F3F3;\r\n\t}\r\n\r\n\t.onloanTextPanel {\r\n\t\tfloat: left;\r\n\t\tmargin-left: 10rpx;\r\n\t}\r\n\r\n\t.savedTextPanel {\r\n\t\tfloat: left;\r\n\t\tmargin-left: 10rpx;\r\n\t}\r\n\r\n\t.onloantext {\r\n\t\tcolor: #FE613D;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.savedtext {\r\n\t\tcolor: #53D776;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.joinMember {\r\n\t\twidth: 200rpx;\r\n\t\theight: 70rpx;\r\n\t\tline-height: 70rpx;\r\n\t\tbackground-color: #FACC3F;\r\n\t\tcolor: #000000;\r\n\t\tborder-radius: 50rpx;\r\n\t\ttext-align: center;\r\n\t\tfont-weight: 600;\r\n\t\tfont-size: 30rpx;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\r\n\t.avatar-wrapper {\r\n\t\tborder: none;\r\n\t\tbackground: none;\r\n\t\t/* position: inherit; */\r\n\t\tpadding: 0px;\r\n\t}\r\n\r\n\tuni-button:after {\r\n\t\tborder: none;\r\n\t}\r\n\r\n\tbutton::after {\r\n\t\tborder: none;\r\n\t}\r\n\t.popupSty {\r\n\t    width: 100%; \r\n\t    overflow: hidden;\r\n\t    >view {\r\n\t        font-size: 14px;\r\n\t        height: 50px;\r\n\t        border-top: 1px solid rgba(0, 0, 0, 0.1);\r\n\t        display: flex;;\r\n\t        align-items: center;;\r\n\t        justify-content: center;\r\n\t        padding: 0 10px;\r\n\t    }\r\n\t\r\n\t}\r\n</style>","import mod from \"-!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1726024316105\n      var cssReload = require(\"D:/HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}