{"version":3,"sources":["uni-app:///main.js","webpack:///D:/Work/HB/BRP/pages/home/booksDetail.vue?d94e","webpack:///D:/Work/HB/BRP/pages/home/booksDetail.vue?77e7","webpack:///D:/Work/HB/BRP/pages/home/booksDetail.vue?2d00","webpack:///D:/Work/HB/BRP/pages/home/booksDetail.vue?61b3","uni-app:///pages/home/booksDetail.vue","webpack:///D:/Work/HB/BRP/pages/home/booksDetail.vue?324d","webpack:///D:/Work/HB/BRP/pages/home/booksDetail.vue?9f0e"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","url","imageRootUrl","adminRootUrl","statusBarHeight","head_is_fixed","bookSkuID","bookInfo","booksList","loadingText","showLoadMore","pageIndex","pageSize","pageCount","isbooksList","list","id","name","old","scrollTop","isMark","memberBookmarkID","IsBorrow","isAntiShake","components","mpHtml","onReady","onShow","withShareTicket","menus","onPageScroll","that","onLoad","methods","bindData","bindIsBorrow","common","bindGetViewBook","scroll","clickToBack","uni","bindbookSeries","lower","console","bindIsBookMark","clickCollection","title","content","showCancel","success","clickCancelCollection","clickBorrow","impower","condition","Borrow","tmplIds","clickAddBorrowNotice","AddBorrowNotice","clickTobooksDetail","filters","ToIsBookAvailable","toNull","toBookImageFilePath"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,oBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwH;AACxH;AAC+D;AACL;AACc;;;AAGxE;AAC6M;AAC7M,gBAAgB,oNAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,sFAAM;AACR,EAAE,+FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,wOAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjEA;AAAA;AAAA;AAAA;AAA0zB,CAAgB,wzBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;AC0F90B;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AAAA,eACA;EACAC;IACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;QACAC;QACAC;QACAhB;MACA;QACAe;QACAC;QACAhB;MACA,GACA;QACAe;QACAC;QACAhB;MACA;QACAe;QACAC;QACAhB;MACA,GACA;QACAe;QACAC;QACAhB;MACA;QACAe;QACAC;QACAhB;MACA,GACA;QACAe;QACAC;QACAhB;MACA,EACA;MACAiB;QACAC;MACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IACAC;EACA;EACAC;EACAC;IACAhC;MACAiC;MACA;MACAC;IACA;EACA;EACAC;IACAC;EACA;EACAC;IACAD;IACAA;IACAA;EACA;;EACAE;IACAC;MACAH;MACAA;;MAEAA;IACA;IACAI;MAAA;MACA;MACAnC;MACAA;MACAA;MACAoC;QACA;UACAL;QACA;UACAA;QACA;MACA;IACA;IACAM;MAAA;MACA;MACArC;MACAoC;QACA;QACAL;QACA;UACAA;QACA;QACA;UACA;UACA;UACA;UACA;UACA;UACAA;UACAA;UACA;QACA;UACAA;QACA;QACA;QACAA;MACA;IACA;;IACAO;MACA;MACA;IACA;IACAC;MACAC;IACA;IACAC;MAAA;MACA;MACA;QACA;MACA;MACAzC;MACAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;MAAA,CACA;QACAA;MACA;MACAA;MACAA;MACAA;MACAA;MACAoC;QAAA;QACA;QACA;QACAL;QACAA;QACAA;QACA;UACAA;QACA;QACA;UACAA;QACA;UACAA;QACA;MACA;IACA;IACAW;MACAC;MACA;QACAZ;MACA;QACAA;QACAA;QACAA;QACAA;MACA;IACA;IACAa;MAAA;MACA;MACA;QACA;MACA;MACA;MACA5C;MACAA;MACAoC;QACAO;QACA;UACAZ;QACA;UAEAA;UACAA;UACAY;QACA;MACA;IACA;IACAE;MAAA;MACA;MACA;QACA;MACA;MACA;QACA;MACA;MACAd;MACA;MACA/B;MACAA;MACAoC;QACAO;QACAH;UACAM;UACAC;UACAC;UAAA;UACAC;YACA;cACAlB;cACAA;YACA;UACA;QACA;MACA;QACAY;QACA;UACAH;YACAM;YACAC;YACAC;YAAA;YACAC;cACA;gBACAlB;cACA;YACA;UACA;QACA;MACA;IACA;IACAmB;MAAA;MACA;QACA;MACA;MACAnB;MACA;MACA/B;MACAA;MACAoC;QACAI;UACAM;UACAC;UACAC;UAAA;UACAC;YACA;cACAlB;cACAA;YACA;UACA;QAAA;MACA;QACAY;QACA;UACAH;YACAM;YACAC;YACAC;YAAA;YACAC;cACA;gBACAlB;cACA;YACA;UACA;QACA;MACA;IACA;IACAoB;MAAA;MACA;MACA;QACA;MACA;MAEApB;IAEA;IACAqB;MACA;QACA;MACA;MACArB;MACA;MACA;MACA/B;MACAA;MACAA;MACAqD;MACAjB;QACA;QACA;UACAI;YACAM;YACAC;YACAC;YAAA;YACAC;cACA;gBACAlB;cACA;gBACAA;cACA;YACA;UACA;QACA;UACAA;QACA;MACA;IACA;IACAuB;MAAA;MACA;MACAtD;MACAA;MACAA;MACAoC;QACAO;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACAH;UACAM;UACAC;UACAC;UAAA;UACAC;YACA;cACAlB;cACA;cACA;cACA;cACApC;gBACA4D;gBACAN;kBACAN;gBACA;cACA;YACA;UACA;QACA;QACAZ;QACAA;QACA;MACA;QACAY;QACA;UACAH;YACAM;YACAC;YACAC;YAAA;YACAC;cACA;gBACAlB;cACA;YACA;UACA;QACA;MACA;IACA;IACAyB;MAAA;MACA;MACAzB;IACA;IACA0B;MAAA;MACA;MACA;QACA;MACA;MACA;QACA;MACA;MACA1B;MACA;MACA/B;MACAA;MACAoC;QACAO;QACAH;UACAM;UACAC;UACAC;UAAA;UACAC;YACA;cACAlB;cACApC;gBACA4D;gBACAN;kBACAN;gBACA;cACA;YACA;UACA;QACA;MACA;QACAA;QACA;UACAH;YACAM;YACAC;YACAC;YAAA;YACAC;cACA;gBACAlB;cACA;YACA;UACA;QACA;MACA;IACA;IACA2B;MAAA;MACA;MACA;MACA;MACAlB;QACAvC;MACA;IACA;EACA;;EACA0D;IACAC;MACA;QACA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;QACA;;;;;;;;;;;;;;;;;;;;AC7hBA;AAAA;AAAA;AAAA;AAA6gD,CAAgB,m8CAAG,EAAC,C;;;;;;;;;;;ACAjiD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/home/booksDetail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/home/booksDetail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./booksDetail.vue?vue&type=template&id=f34a6d38&\"\nvar renderjs\nimport script from \"./booksDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./booksDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./booksDetail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/home/booksDetail.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./booksDetail.vue?vue&type=template&id=f34a6d38&\"","var components\ntry {\n  components = {\n    mpHtml: function () {\n      return import(\n        /* webpackChunkName: \"components/mp-html/mp-html\" */ \"@/components/mp-html/mp-html.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var f0 = _vm._f(\"toBookImageFilePath\")(_vm.bookInfo)\n  var f1 = _vm._f(\"toNull\")(_vm.bookInfo.bookName)\n  var f2 = _vm._f(\"toNull\")(_vm.bookInfo.author)\n  var f3 = _vm._f(\"toNull\")(_vm.bookInfo.bookcaseName)\n  var f4 = _vm._f(\"ToIsBookAvailable\")(_vm.bookInfo.isBookAvailable)\n  var f5 = _vm._f(\"toNull\")(_vm.bookInfo.bookTagNames)\n  var f6 = _vm._f(\"toNull\")(_vm.bookInfo.ageGroupNames)\n  var f7 = _vm._f(\"toNull\")(_vm.bookInfo.bookSeriesName)\n  var l0 = _vm.__map(_vm.booksList, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var f8 = _vm._f(\"toBookImageFilePath\")(item)\n    return {\n      $orig: $orig,\n      f8: f8,\n    }\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        f0: f0,\n        f1: f1,\n        f2: f2,\n        f3: f3,\n        f4: f4,\n        f5: f5,\n        f6: f6,\n        f7: f7,\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./booksDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./booksDetail.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"container\">\r\n\t\t\t<view class=\"h10\"></view>\r\n\t\t\t<view class=\"line70 highlight160Panel\" style=\"top: 0;\">\r\n\t\t\t\t<view class=\"line60 center highlight160\">\r\n\t\t\t\t\t图书信息\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"contentPanel\" style=\"border-radius: 18rpx; margin-top: -35rpx;\">\r\n\t\t\t\t<!-- <div class=\"latest-item\" >已借阅</div> -->\r\n\t\t\t\t<image class=\"\" v-if=\"IsBorrow\" src=\"../../static/image/common/IsBorrow.png\" mode=\"aspectFit\" style=\"width: 100rpx; height: 80rpx; position: absolute; right: 30rpx;\"></image>\r\n\t\t\t\t<view class=\"booksList\">\r\n\t\t\t\t\t<view class=\"books-info\">\r\n\t\t\t\t\t\t<view class=\"img\">\r\n\t\t\t\t\t\t\t<image :src=\"bookInfo | toBookImageFilePath\" mode=\"aspectFit\"></image><!-- aspectFit -->\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"info\">\r\n\t\t\t\t\t\t\t<!-- <view class=\"f30 line60\" style=\"font-weight: bold;\">图书信息</view> -->\r\n\t\t\t\t\t\t\t<view class=\"f26 \">\r\n\t\t\t\t\t\t\t\t<text class=\"booksInfoTitle\" style=\"\">书名：</text>{{bookInfo.bookName | toNull}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"f26 \">\r\n\t\t\t\t\t\t\t\t<text class=\"booksInfoTitle\" style=\"\">作者：</text>{{bookInfo.author | toNull}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"f26 \">\r\n\t\t\t\t\t\t\t\t<text class=\"booksInfoTitle\" style=\"\">书柜位置：</text>{{bookInfo.bookcaseName | toNull}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"f26 ellipsis\"><text class=\"booksInfoTitle\">状态：</text>{{bookInfo.isBookAvailable | ToIsBookAvailable }}</view>\r\n\t\t\t\t\t\t\t<view class=\"f26 \"><text class=\"booksInfoTitle\">分类：</text>{{bookInfo.bookTagNames | toNull}}</view>\r\n\t\t\t\t\t\t\t<view class=\"f26 \"><text class=\"booksInfoTitle\">适合年龄：</text>{{bookInfo.ageGroupNames | toNull}} </view>\r\n\t\t\t\t\t\t\t<view class=\"f26 \"><text class=\"booksInfoTitle\">系列：</text>{{bookInfo.bookSeriesName | toNull}} </view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view v-show=\"isbooksList\">\r\n\t\t\t\t<view class=\"line70 highlight160Panel\">\r\n\t\t\t\t\t<view class=\"line60 center highlight160\">\r\n\t\t\t\t\t\t同系列图书\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"contentPanel\" style=\"height: 270rpx;\"> <!-- 绘本系列 -->\r\n\t\t\t\t\t<view class=\"line20\"></view>\r\n\t\t\t\t<!-- \t<view class=\"series\" style=\"float: left; width: 90rpx;height: 250rpx;\" >\r\n\t\t\t\t\t\t<view style=\"width: 90rpx; text-align: center;\"> \r\n\t\t\t\t\t\t\t<image :src=\"imageRootUrl + 'image/home/series.png'\" class=\"size50\" style=\"margin-top: 20rpx;\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"center seriesname\" style=\"width:90rpx;\"><text class=\"f24\">{{bookInfo.bookSeriesName}}</text></view>\t\r\n\t\t\t\t\t</view> -->\r\n\t\t\t\t\t<view style=\"float: right; width: calc(100% - 5rpx);\">\r\n\t\t\t\t\t\t<scroll-view class=\"scroll-view_H\" scroll-x=\"true\" @scroll=\"scroll\" @scrolltolower=\"lower\">\r\n\t\t\t\t\t\t\t<view v-for=\"(item, index) in booksList\" :key=\"index\" style=\"\" class=\"scroll-view-item_H\">\r\n\t\t\t\t\t\t\t\t<view style=\"position: relative;overflow: hidden;height: 100% ;width: 100%;\" @tap=\"clickTobooksDetail(item)\">\r\n\t\t\t\t\t\t\t\t\t<view style=\"cursor: pointer;\"><!-- :src=\"adminRootUrl + item.imageFilePath\" -->\r\n\t\t\t\t\t\t\t\t\t\t<image :src=\"item | toBookImageFilePath\" mode=\"aspectFit\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\" height: 210rpx;display: block;width: 95% ;  border:  2rpx solid rgb(211 211 211); border-radius: 10rpx;\">\r\n\t\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"line50 center f24\">{{item.bookName}}</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"outOnLoan\" v-show=\"item.isBookAvailable !=1 \">已借出</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"line70 highlight160Panel\">\r\n\t\t\t\t<view class=\"line60 center highlight160\">\r\n\t\t\t\t\t图书内容简介\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"contentPanel\"> <!-- 图书内容介绍 -->\r\n\t\t\t<view class=\"line10\"></view>\r\n\t\t\t\t<!-- <rich-text :nodes=\"bookInfo.introduction\"></rich-text> -->\r\n\t\t\t\t<mp-html :content=\"bookInfo.introduction\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"h180\"></view>\r\n\t\t</view>\r\n\t\t<view class=\"btn\">\r\n\t\t\t<view class=\"back\" @tap=\"clickCollection()\" v-if=\"isMark == false\">收藏</view>\r\n\t\t\t<view class=\"back\" @tap=\"clickCancelCollection()\" v-else>取消收藏</view>\r\n\t\t\t<view class=\"signUp\" @tap=\"clickBorrow()\" v-if=\"bookInfo.isBookAvailable == 1\">借阅</view>\r\n\t\t\t<view class=\"signUp\" @tap=\"clickAddBorrowNotice()\" v-else>可借时通知</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport common from \"@/js/common.js\";\r\n\timport config from \"@/js/config.js\";\r\n\timport util from \"@/js/util.js\";\r\n\timport mpHtml from '@/components/mp-html/mp-html'\r\n\tlet statusBarHeight = uni.getSystemInfoSync().statusBarHeight; // 状态栏 高度\r\n\tlet that = null;\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\turl: \"http://admin.8630.net/WYB/UploadFile/headerTopbg.png\",\r\n\t\t\t\timageRootUrl: config.imageRootUrl, //图片地址\r\n\t\t\t\tadminRootUrl: config.adminRootUrl + \"/\", //后端图片地址\r\n\t\t\t\tstatusBarHeight, // 状态栏 高度\r\n\t\t\t\thead_is_fixed: 0,\r\n\t\t\t\tbookSkuID: '',\r\n\t\t\t\tbookInfo: {},\r\n\t\t\t\tbooksList: [], //同系列\r\n\t\t\t\tloadingText: \"正在加载...\",\r\n\t\t\t\tshowLoadMore: false,\r\n\t\t\t\tpageIndex: 0, //页数\r\n\t\t\t\tpageSize: 5, //条数\r\n\t\t\t\tpageCount: 0, //最大页数\r\n\t\t\t\tisbooksList:false,\r\n\t\t\t\tlist: [{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tname: '密码花园2',\r\n\t\t\t\t\t\turl: config.imageRootUrl + 'image/common/bookb1.jpg',\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\tname: '安徒生童话全集2',\r\n\t\t\t\t\t\turl: config.imageRootUrl + 'image/common/bookb2.jpg',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\tname: '窗边的小豆豆2',\r\n\t\t\t\t\t\turl: config.imageRootUrl + 'image/common/bookb3.jpg',\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tid: 4,\r\n\t\t\t\t\t\tname: '夏洛的网2',\r\n\t\t\t\t\t\turl: config.imageRootUrl + 'image/common/bookb4.jpg',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 5,\r\n\t\t\t\t\t\tname: '柳林风声2',\r\n\t\t\t\t\t\turl: config.imageRootUrl + 'image/common/bookb5.jpg',\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tid: 6,\r\n\t\t\t\t\t\tname: '格林童话2',\r\n\t\t\t\t\t\turl: config.imageRootUrl + 'image/common/bookb6.jpg',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 5,\r\n\t\t\t\t\t\tname: '柳林风声2',\r\n\t\t\t\t\t\turl: config.imageRootUrl + 'image/common/bookb7.jpg',\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\told: {\r\n\t\t\t\t\tscrollTop: 0\r\n\t\t\t\t},\r\n\t\t\t\tisMark:false,//是否收藏\r\n\t\t\t\tmemberBookmarkID:'',//收藏ID\r\n\t\t\t\tIsBorrow:false,//是否借阅\r\n\t\t\t\tisAntiShake:false,//防抖\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tmpHtml\r\n\t\t},\r\n\t\tonReady() {},\r\n\t\tonShow() {\r\n\t\t\twx.showShareMenu({\r\n\t\t\t\twithShareTicket:true,\r\n\t\t\t\t//设置下方的Menus菜单，才能够让发送给朋友与分享到朋友圈两个按钮可以点击\r\n\t\t\t\tmenus:[\"shareAppMessage\",\"shareTimeline\"]\r\n\t\t\t})\r\n\t\t},\r\n\t\tonPageScroll(e) {\r\n\t\t\tthat.head_is_fixed = e.scrollTop > 0 ? 1 : 0\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tthat = this;\r\n\t\t\tthat.bookSkuID = option.bookSkuID\r\n\t\t\tthat.bindData(); //GetViewBook\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tbindData() {\r\n\t\t\t\tthat.bindGetViewBook(); //绑定书籍信息\r\n\t\t\t\tthat.bindIsBookMark();//是否收藏\r\n\t\t\t\t\r\n\t\t\t\tthat.bindIsBorrow();\r\n\t\t\t},\r\n\t\t\tbindIsBorrow(){//是否借阅\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tdata.memberId = common.getMemberId()\r\n\t\t\t\tdata.bookSkuId  = that.bookSkuID\r\n\t\t\t\tdata.fields = \"count(*) as count\"\r\n\t\t\t\tcommon.call(\"GetViewBookOrderItemList\", data, function(result) {\r\n\t\t\t\t\tif (result.data.dataList[0].count > 0) {\r\n\t\t\t\t\t\tthat.IsBorrow = true\r\n\t\t\t\t\t} else{\r\n\t\t\t\t\t\tthat.IsBorrow = false\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tbindGetViewBook() { //绑定书籍信息\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tdata.id = that.bookSkuID\r\n\t\t\t\tcommon.call(\"GetBookSkuInfo\", data, function(result) {\r\n\t\t\t\t\t//console.log(result)\r\n\t\t\t\t\tthat.bookInfo = result.data[0]\r\n\t\t\t\t\tif(that.bookInfo.bookcaseName ==null){\r\n\t\t\t\t\t\tthat.bookInfo.bookcaseName = \"无\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (that.bookInfo.introduction != \"\" && that.bookInfo.introduction != null) {\r\n\t\t\t\t\t\tvar str = that.bookInfo.introduction\r\n\t\t\t\t\t\tlet reg = new RegExp('<img', 'g') //g代表全部\r\n\t\t\t\t\t\t//console.log(reg)\r\n\t\t\t\t\t\tlet newMsgs = str.replace(reg, '<img width=\"100%\" '); \t\r\n\t\t\t\t\t\t//console.log(newMsgs)\r\n\t\t\t\t\t\tthat.bookInfo.introduction = newMsgs;\r\n\t\t\t\t\t\tthat.bookInfo.introduction =common.formatTable(newMsgs);\r\n\t\t\t\t\t\t// console.log(common.formatTable(newMsgs))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.bookInfo.introduction = \"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//console.log(that.bookInfo.introduction)\r\n\t\t\t\t\tthat.bindbookSeries(); //同系列\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tscroll: function(e) {\r\n\t\t\t\t//console.log(e)\r\n\t\t\t\tthis.old.scrollTop = e.detail.scrollTop\r\n\t\t\t},\r\n\t\t\tclickToBack() {\r\n\t\t\t\tuni.navigateBack();\r\n\t\t\t},\r\n\t\t\tbindbookSeries() { //同系列\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tif(that.bookInfo.bookSeriesId ==null || that.bookInfo.bookSeriesId ==\"\" || that.bookInfo.bookSeriesId==\"null\"){\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tdata.bookSeriesId = that.bookInfo.bookSeriesId\r\n\t\t\t\tdata.bookSkuId = that.bookSkuID\r\n\t\t\t\t// if(common.getCommunityId() == \"\" || common.getCommunityId() == null ){\r\n\t\t\t\t// \t data.condition = 'company_id=(SELECT id FROM company where is_default is true) and is_online is  true and id !='+that.bookSkuID\r\n\t\t\t\t// }else{\r\n\t\t\t\t// \tdata.companyId = common.getCommunityId()\r\n\t\t\t\t// \tdata.condition= \"is_online is  true and id !=\"+that.bookSkuID //线上是否可见\r\n\t\t\t\t// }\r\n\t\t\t\tif(common.getCommunityId() == \"\" || common.getCommunityId() == null ){\r\n\t\t\t\t\t //data.condition = 'company_id=(SELECT id FROM company where is_default is true) and is_online is  true'\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdata.companyId = common.getCommunityId()\r\n\t\t\t\t}\r\n\t\t\t\tdata.condition= \"is_online is  true\" //线上是否可见\r\n\t\t\t\tdata.pageIndex = that.pageIndex\r\n\t\t\t\tdata.pageSize =  that.pageSize\r\n\t\t\t\tdata.orderBy = \"create_time desc\";\r\n\t\t\t\tcommon.call(\"GetViewBookSkuInfoList\", data, function(result) {\r\n\t\t\t\t\t//console.log(result)  \r\n\t\t\t\t\tthat.booksList.push(...result.data.dataList);\r\n\t\t\t\t\tthat.pageCount = result.data.pageCount;\r\n\t\t\t\t\tthat.pageIndex = result.data.pageIndex;\r\n\t\t\t\t\tthat.pageSize = result.data.pageSize;\r\n\t\t\t\t\tif (that.booksList.length == 0 || that.booksList.length <= 10) {\r\n\t\t\t\t\t\tthat.loadingText = \"没有更多数据了\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(that.booksList.length == 0){\r\n\t\t\t\t\t\tthat.isbooksList =false\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthat.isbooksList =true\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tlower(e) {\r\n\t\t\t\tconsole.log(\"滚动到底部\")\r\n\t\t\t\tif ((that.pageIndex + 1) == that.pageCount) {\r\n\t\t\t\t\tthat.loadingText = \"没有更多数据了\";\r\n\t\t\t\t} else if ((that.pageIndex + 1) < that.pageCount) {\r\n\t\t\t\t\tthat.pageIndex = that.pageIndex + 1;\r\n\t\t\t\t\tthat.showLoadMore = true;\r\n\t\t\t\t\tthat.loadingText = \"加载更多\";\r\n\t\t\t\t\tthat.bindbookSeries(); //绑定数据\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbindIsBookMark(){//是否收藏\r\n\t\t\t\tvar memberId = uni.getStorageSync('memberId');\r\n\t\t\t\tif (memberId == null || memberId == \"\") {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tdata.memberId = common.getMemberId()\r\n\t\t\t\tdata.bookSkuId = that.bookSkuID\r\n\t\t\t\tcommon.call(\"GetMemberBookmarkByMemberIdAndBookSkuId\", data, function(result) {\r\n\t\t\t\t\tconsole.log(result.data)\r\n\t\t\t\t\tif(result.data ==null){\r\n\t\t\t\t\t\tthat.isMark =false\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthat.isMark =true\r\n\t\t\t\t\t\tthat.memberBookmarkID = result.data.id\r\n\t\t\t\t\t\tconsole.log(that.isMark)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tclickCollection() { //收藏\r\n\t\t\t\tvar isValid = common.checkLogin();\r\n\t\t\t\tif (!isValid) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(that.isAntiShake == true){\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthat.isAntiShake = true\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tdata.memberId = common.getMemberId()\r\n\t\t\t\tdata.bookSkuId = that.bookSkuID\r\n\t\t\t\tcommon.call(\"AddMemberBookmark\", data, function(result) {\r\n\t\t\t\t\tconsole.log(result)\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '提示', \r\n\t\t\t\t\t\tcontent: \"收藏成功！\",\r\n\t\t\t\t\t\tshowCancel: false,//没有取消按钮的弹框\r\n\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tthat.isAntiShake = false\r\n\t\t\t\t\t\t\t\tthat.bindIsBookMark();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}, function(e) {\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\tif (e.success == false) {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '提示', \r\n\t\t\t\t\t\t\tcontent: e.errorMessage,\r\n\t\t\t\t\t\t\tshowCancel: false,//没有取消按钮的弹框\r\n\t\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\tthat.isAntiShake = false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tclickCancelCollection(){//取消收藏\r\n\t\t\t\tif(that.isAntiShake == true){\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthat.isAntiShake = true\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tdata.tableName = \"member_bookmark\";\r\n\t\t\t\tdata.condition = \"member_id = \" + common.getMemberId() +\" and book_sku_id=\" + that.bookSkuID\r\n\t\t\t\tcommon.call(\"DeleteMemberBookmark\", data, function(result) {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tcontent: \"取消成功！\",\r\n\t\t\t\t\t\tshowCancel: false,//没有取消按钮的弹框\r\n\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tthat.isAntiShake = false\r\n\t\t\t\t\t\t\t\tthat.bindIsBookMark();\r\n\t\t\t\t\t\t\t} \r\n\t\t\t\t\t}});\r\n\t\t\t\t}, function(e) {\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\tif (e.success == false) {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '提示', \r\n\t\t\t\t\t\t\tcontent: e.errorMessage,\r\n\t\t\t\t\t\t\tshowCancel: false,//没有取消按钮的弹框\r\n\t\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\tthat.isAntiShake = false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tclickBorrow() { //借阅\r\n\t\t\t\tvar isValid = common.checkLogin();\r\n\t\t\t\tif (!isValid) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthat.impower();//消息允许或者拒绝 才会执行借阅\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\timpower(){\r\n\t\t\t\tif(that.isAntiShake == true){\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthat.isAntiShake = true\r\n\t\t\t\t// uni.showLoading();\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tdata.memberId = common.getMemberId()\r\n\t\t\t\tdata.bookSkuId  = that.bookSkuID\r\n\t\t\t\tdata.fields = \"count(*) as count\"\r\n\t\t\t\tcondition:\"is_returned is not true\"\r\n\t\t\t\tcommon.call(\"GetViewBookOrderItemList\", data, function(result) {\r\n\t\t\t\t\t// uni.hideLoading();\r\n\t\t\t\t\tif (result.data.dataList[0].count > 0) {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\tcontent: '您已经借过了是否还要借？',\r\n\t\t\t\t\t\t\tshowCancel: true, //没有取消按钮的弹框\r\n\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\tthat.Borrow();\r\n\t\t\t\t\t\t\t\t}else if (res.cancel) {\n\t\t\t\t\t\t\t\t\tthat.isAntiShake = false\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.Borrow();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tBorrow() { //借阅\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tdata.memberId = common.getMemberId()\r\n\t\t\t\tdata.companyId = common.getCommunityId()\r\n\t\t\t\tdata.bookSkuId = that.bookSkuID\r\n\t\t\t\tcommon.call(\"AddOnLineBorrowBookOrder\", data, function(result) {\r\n\t\t\t\t\tconsole.log(result)\r\n\t\t\t\t\t//借阅成功！您借阅的图书，将在几月几号（星期几）为您配送，请注意查收。\r\n\t\t\t\t\t// uni.showModal({\r\n\t\t\t\t\t// \ttitle: \"提示\", \r\n\t\t\t\t\t// \tcontent: \"借阅成功！您借阅的图书，将在\" + result.data + \"为您配送，请注意查收。\",\r\n\t\t\t\t\t// \tshowCancel: false,\r\n\t\t\t\t\t// \tconfirmText: \"确定\",\r\n\t\t\t\t\t// });\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '提示', \r\n\t\t\t\t\t\tcontent: \"借阅成功！您借阅的图书，将在\" + result.data + \"为您配送，请注意查收。\",\r\n\t\t\t\t\t\tshowCancel: false,//没有取消按钮的弹框\r\n\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tthat.isAntiShake = false\r\n\t\t\t\t\t\t\t\t//T6yoA-2ZrVAtXNQ89le-rkW3QrNcDDRqr98R8l4qLdY 借阅超时提醒\r\n\t\t\t\t\t\t\t\t//i2jBP4bt8e7vkWbJJNIlbcl7hxUecYVAQovmDpNYcGo 图书送达通知\r\n\t\t\t\t\t\t\t\t//rUfZ2uKPijZ1uDSk67lzhVsmWJCWaPviAQFgEPm7LkM 会员到期提醒\r\n\t\t\t\t\t\t\t\twx.requestSubscribeMessage({\r\n\t\t\t\t\t\t\t\t\ttmplIds: ['T6yoA-2ZrVAtXNQ89le-rkW3QrNcDDRqr98R8l4qLdY','i2jBP4bt8e7vkWbJJNIlbcl7hxUecYVAQovmDpNYcGo','rUfZ2uKPijZ1uDSk67lzhVsmWJCWaPviAQFgEPm7LkM'],\r\n\t\t\t\t\t\t\t\t\tsuccess (res) { \r\n\t\t\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}) \r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthat.bindGetViewBook(); //绑定书籍信息\r\n\t\t\t\t\tthat.bindIsBorrow();\r\n\t\t\t\t\t// that.bookInfo.isBookAvailable = 1\r\n\t\t\t\t}, function(e) {\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\tif (e.success == false) {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '提示', \r\n\t\t\t\t\t\t\tcontent: e.errorMessage,\r\n\t\t\t\t\t\t\tshowCancel: false,//没有取消按钮的弹框\r\n\t\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\tthat.isAntiShake = false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tclickAddBorrowNotice() { //加入到可借通知\r\n\t\t\t\t//rtoTf-yZAaIH04Lo2nfbjYuXoLyqYwq_66YBuF_DW3k //预约图书可借通知\r\n\t\t\t\tthat.AddBorrowNotice();//消息允许或者拒绝 才会执行借阅\r\n\t\t\t},\r\n\t\t\tAddBorrowNotice(){ //加入到可借通知\r\n\t\t\t\tvar isValid = common.checkLogin();\r\n\t\t\t\tif (!isValid) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(that.isAntiShake == true){\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthat.isAntiShake = true\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tdata.memberId = common.getMemberId()\r\n\t\t\t\tdata.bookSkuId = that.bookSkuID\r\n\t\t\t\tcommon.call(\"AddMemberBookSubscription\", data, function(result) {\r\n\t\t\t\t\tconsole.log(result)\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '提示', \r\n\t\t\t\t\t\tcontent: \"已加入到可借通知！\",\r\n\t\t\t\t\t\tshowCancel: false,//没有取消按钮的弹框\r\n\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tthat.isAntiShake = false\r\n\t\t\t\t\t\t\t\twx.requestSubscribeMessage({\r\n\t\t\t\t\t\t\t\t\ttmplIds: ['rtoTf-yZAaIH04Lo2nfbjYuXoLyqYwq_66YBuF_DW3k'],\r\n\t\t\t\t\t\t\t\t\tsuccess (res) { \r\n\t\t\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}, function(e) {\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\tif (e.success == false) {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '提示', \r\n\t\t\t\t\t\t\tcontent: e.errorMessage,\r\n\t\t\t\t\t\t\tshowCancel: false,//没有取消按钮的弹框\r\n\t\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\tthat.isAntiShake = false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tclickTobooksDetail(item) { //图书详情\r\n\t\t\t\t// uni.redirectTo({\r\n\t\t\t\t// \turl: \"booksDetail?bookSkuID=\" + item.id  // 无线下钻  返回只能返回到首页去\r\n\t\t\t\t// })\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"booksDetail?bookSkuID=\" + item.id  // 只能下钻到十层，返回会默认一级一级的返回\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\tToIsBookAvailable(val) {\r\n\t\t\t\tif (val == 1) {\r\n\t\t\t\t\treturn \"可借\"\r\n\t\t\t\t} else if (val == 0) {\r\n\t\t\t\t\treturn \"不可借\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn \"\"\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttoNull(val){\r\t\t\t\tif(val ==null){\r\t\t\t\t\treturn \"\"\r\t\t\t\t}else{\r\t\t\t\t\treturn val\r\t\t\t\t}\r\t\t\t},\r\n\t\t\ttoBookImageFilePath(item){\r\n\t\t\t\tif(item.imageFilePath !=\"\" && item.imageFilePath !=null){\r\n\t\t\t\t\treturn that.adminRootUrl + \"/\" + item.imageFilePath\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn \"../../static/image/common/default.jpg\"\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t \r\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import url(\"/css/common.css\");\r\n\r\n\tpage {\r\n\t\tbackground: #5EAC59;\r\n\t}\r\n\t\r\n\t.container {}\r\n\t.latest-item{\r\n\t\t position: absolute;\r\n\t\t  top: 96rpx;\r\n\t\t  right: -1px;\r\n\t\t  height: 10rpx;\r\n\t\t  line-height: 10rpx;\r\n\t\t  font-size: 28rpx;\r\n\t\t  color: #ffffff;\r\n\t\t  background-color: #ffcc00;\r\n\t\t  padding: 20rpx;\r\n\t\t  border-radius: 5px;\r\n\t\t  transform: rotate(40deg); /* 将元素旋转45度 */\r\n\t\t  transform-origin: right top; /* 旋转的原点在右上角 */\r\n\t}\r\n\t.booksList {\r\n\t\twidth: 100%;\r\n\t\tdisplay: block;\r\n\t\tposition: relative;\r\n\r\n\t\t.books-info {\r\n\t\t\tdisplay: flex;\r\n\t\t\twidth: calc(100%);\r\n\t\t\tpadding: 10rpx 10rpx 10rpx 10rpx;\r\n\t\t\tflex-wrap: nowrap;\r\n\t\t\tborder-bottom: 1px solid #dedede;\r\n\t\t\tjustify-content: center;\r\n\t\t\t    align-items: center;\r\n\t\t\t&:last-child {\r\n\t\t\t\tborder-bottom: none;\r\n\t\t\t}\r\n\r\n\t\t\t.img {\r\n\t\t\t\twidth: calc(30vw - 70rpx);\r\n\t\t\t\theight: calc(28vw);\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\tflex-shrink: 0;\r\n\t\t\t\tmargin-right: 20upx;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: calc(30vw - 70rpx);\r\n\t\t\t\t\theight: calc(27vw);\r\n\t\t\t\t\tborder-radius: 20rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.info {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\t// height: calc(27vw);\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\tflex-wrap: wrap;\r\n\t\t\t\talign-content: space-between;\r\n\t\t\t\tposition: relative;\r\n\t\t\t}\r\n\r\n\t\t\t.booksInfoTitle {\r\n\t\t\t\tcolor: #999999;\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.highlight160Panel {\r\n\t\tbackground: white;\r\n\t\t// border-radius: 40rpx;\r\n\t\tpadding: 2px;\r\n\t\tposition: relative;\r\n\t\ttop: 35rpx;\r\n\t\twidth: 180rpx;\r\n\t\t// margin-left: -20rpx;\r\n\t\tborder-top-right-radius: 30rpx;\r\n\t\tborder-top-left-radius: 30rpx;\r\n\t\tborder-bottom-right-radius: 30rpx;\r\n\t}\r\n\r\n\t.highlight160 {\r\n\t\tbackground: #FFD965;\r\n\t\tborder-radius: 15px;\r\n\t\tborder-bottom-left-radius: 7px;\r\n\t\tborder-bottom-right-radius: 7px;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #000000;\r\n\t}\r\n\r\n\t.scroll-view_H {\r\n\t\twhite-space: nowrap;\r\n\t\twidth: 100%;\r\n\r\n\t}\r\n\r\n\t.scroll-view-item_H {\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 30%;\r\n\t\theight: 250rpx;\r\n\t\tline-height: 250rpx;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 36rpx;\r\n\t\tmargin-left: 2%;\r\n\t}\r\n\t.series{\r\n\t\twidth: 80rpx;height: 250rpx;\r\n\t\t\r\n\t}\r\n\t.seriesname {\r\n\t\twriting-mode: vertical-lr;\r\n\t\ttext-orientation: upright;\r\n\t\ttext-align: left;\r\n\t\t// font-family: Arial, sans-serif;\r\n\t\tletter-spacing:4rpx;\r\n\t\tline-height: 66rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: 600;\r\n\t\twidth: 70rpx;\r\n\t\theight: 200rpx;\r\n\t\t\r\n\t\twriting-mode: vertical-lr; /* 设置文字竖排 */\r\n\t\ttext-orientation: upright; /* 设置文字排列方向 */\r\n\t\toverflow: hidden; /* 隐藏溢出部分 */\r\n\t\tline-height: 32rpx; /* 设置行高 */\r\n\t\t\r\n\t\tdisplay: flex; /* 使用 Flexbox 布局 */\r\n\t\tjustify-content: center; /* 水平居中 */\r\n\t\talign-items: center; /* 垂直居中 */\r\n\t\t\r\n\t\t\r\n\t\t// width: 70rpx; /* 设置宽度 */\r\n\t\t// height: 180rpx; /* 设置高度 */\r\n\t\t// display: flex; /* 使用 Flexbox 布局 */\r\n\t\t// flex-direction: column; /* 垂直排列 */\r\n\t\t// justify-content: center; /* 主轴居中 */\r\n\t\t// align-items: center; /* 交叉轴居中 */\r\n\t\t// overflow: hidden; /* 隐藏溢出部分 */\r\n\t\t// text-align: center; /* 文字水平居中 */\r\n\t\t// writing-mode: vertical-rl; /* 设置文字竖排 */\r\n\t\t// text-orientation: upright; /* 设置文字排列方向 */\r\n\t\t// text{\r\n\t\t// \t overflow: hidden; /* 隐藏溢出部分 */\r\n\t\t// \t        text-overflow: ellipsis; /* 使用省略号显示溢出文字 */\r\n\t\t// \t        white-space: nowrap; /* 防止文字换行 */\r\n\t\t// }\r\n\t}\r\n\r\n\t.btn {\r\n\t\tmargin-top: 20px;\r\n\t\tbottom: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 120rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tposition: fixed;\r\n\t\twidth: 100%;\r\n\t\theight: 150rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t\tbottom: 0;\r\n\t\tz-index: 8;\r\n\t}\r\n\r\n\t.back {\r\n\t\tcolor: #FACC3F;\r\n\t\twidth: 120px;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tfont-size: 27rpx;\r\n\t\tline-height: 80rpx;\r\n\t\ttext-align: center;\r\n\t\tmargin-left: 20rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t\tborder: 1px solid #FACC3F;\r\n\t\tborder-radius: 448rpx;\r\n\t\tfont-weight: bold;\r\n\t\tfont-size: 26rpx;\r\n\r\n\t}\r\n\r\n\t.signUp {\r\n\t\twidth: 120px;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tfont-size: 26rpx;\r\n\t\tline-height: 80rpx;\r\n\t\ttext-align: center;\r\n\t\tmargin-left: 20rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t\tbackground: #FACC3F;\r\n\t\tborder-radius: 448rpx;\r\n\t\tfont-weight: bold;\r\n\t\tfont-size: 26rpx;\r\n\t}\r\n\t.outOnLoan{\r\n\t\t\tcontent: \"\";\r\n\t\t    display: inline-block;\r\n\t\t    width: 80rpx;\r\n\t\t    height: 35rpx;\r\n\t\t\tline-height: 35rpx;\r\n\t\t    background-size: 100% 100%;\r\n\t\t    vertical-align: middle;\r\n\t\t    position: absolute;\r\n\t\t    z-index: 1;\r\n\t\t    top: 0;\r\n\t\t    right: 0;\r\n\t\t    font-size: 24rpx;\r\n\t\t\tbackground-color: #FE613D;\r\n\t\t\tcolor: #ffffff;\r\n\t\t\ttext-align: center;\r\n\t\t\tborder-radius: 10rpx;\r\n\t}\r\n</style>","import mod from \"-!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./booksDetail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./booksDetail.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1726024315049\n      var cssReload = require(\"D:/HBuilder/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}