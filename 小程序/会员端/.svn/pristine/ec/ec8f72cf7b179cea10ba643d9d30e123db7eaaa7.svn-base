(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/books/index"],{"491e":function(e,o,t){"use strict";(function(e){var n=t("4ea4");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var r=n(t("c52e")),i=n(t("bd74")),a=n(t("f0ad")),d=e.getSystemInfoSync().statusBarHeight,u=null,c={data:function(){return{url:"http://admin.8630.net/WYB/UploadFile/headerTopbg.png",imageRootUrl:i.default.imageRootUrl,adminRootUrl:i.default.adminRootUrl+"/",statusBarHeight:d,head_is_fixed:0,borrowedQuantity:0,borrowableQuantity:0,returnedQuantity:"",memberBookOrderItemInfoList:[],borrowBookList:[]}},onReady:function(){},onShow:function(){u.bindGetMemberBorrowBookList()},onPageScroll:function(e){u.head_is_fixed=e.scrollTop>0?1:0},onLoad:function(){u=this},methods:{bindGetMemberBorrowBookList:function(){var e={memberId:7,companyId:35};r.default.call("GetMemberBorrowBookList",e,(function(e){console.log(e.data),u.borrowedQuantity=e.data.borrowedQuantity,u.borrowableQuantity=e.data.borrowableQuantity,null==e.data.returnedQuantity?u.returnedQuantity=0:u.returnedQuantity=e.data.returnedQuantity,u.memberBookOrderItemInfoList=e.data.bookOrderItemInfoList,u.borrowBookList=e.data.bookList;for(var o=0;o<u.memberBookOrderItemInfoList.length;o++){var t=u.memberBookOrderItemInfoList[o];t.remainSeconds=60*t.minutes+t.seconds}var n=u.computeRemainSeconds();n&&u.countDown();for(var r=0;r<u.memberBookOrderItemInfoList.length;r++)if("Return"==u.memberBookOrderItemInfoList[r].bookOrderTypeCode)for(var i=u.borrowBookList.length-1;i>=0;i--)u.borrowBookList[i].id==u.memberBookOrderItemInfoList[r].bookId&&u.borrowBookList.splice(i,1)}))},computeRemainSeconds:function(){for(var e=!1,o=0;o<u.memberBookOrderItemInfoList.length;o++){var t=u.memberBookOrderItemInfoList[o],n=u.getRemainSeconds(t),r=parseInt(n/60),i=parseInt(n%60);n-1>0?(t.remainTime=(r<10?"0":"")+(r>0?r+":":"")+(i<10?"0":"")+i,t.remainSeconds=n-1):t.remainSeconds=0,n>0&&(e=!0)}return u.$forceUpdate(),e},countDown:function(){setTimeout((function(){var e=u.computeRemainSeconds();e&&u.countDown()}),1e3)},getRemainSeconds:function(e){var o=new Date,t=a.default.strToDate(e.createTimeText),n=(t.getTime()-o.getTime())/1e3;return n=n>0?n:0,n},clickCancelBooks:function(o){var t={};t.bookOrderItemId=o.id,r.default.call("CancelledOnlineBorrowBookOrder",t,(function(o){console.log(o.data),e.showModal({title:"提示",content:"取消借书成功！",showCancel:!1,success:function(e){e.confirm&&u.bindGetMemberBorrowBookList()}})}))},clickAddOnLineReturnBookOrder:function(o,t){var n={};n.bookId=o.id,n.memberId=7,n.companyId=35,r.default.call("AddOnLineReturnBookOrder",n,(function(o){console.log(o.data),e.showModal({title:"提示",content:"还书成功！",showCancel:!1,success:function(e){e.confirm&&u.bindGetMemberBorrowBookList()}})}))},clickCancelledOnlineReturnBookOrder:function(o,t){var n={};n.bookOrderItemId=o.id,r.default.call("CancelledOnlineReturnBookOrder",n,(function(o){console.log(o.data),e.showModal({title:"提示",content:"取消成功！",showCancel:!1,success:function(e){e.confirm&&u.bindGetMemberBorrowBookList()}})}))}},filters:{toTime:function(e){if(null==e)return"";var o=new Date(e),t=o.getFullYear(),n=o.getMonth()+1,r=o.getDate();return t+"年"+n+"月"+r+"日"},toNull:function(e){return null==e||""==e||void 0==e||"undefined"==e?"":e}}};o.default=c}).call(this,t("543d")["default"])},"5e5f":function(e,o,t){"use strict";var n=t("7ca1"),r=t.n(n);r.a},6792:function(e,o,t){"use strict";t.r(o);var n=t("491e"),r=t.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){t.d(o,e,(function(){return n[e]}))}(i);o["default"]=r.a},"7ca1":function(e,o,t){},d521:function(e,o,t){"use strict";t.r(o);var n=t("d859"),r=t("6792");for(var i in r)["default"].indexOf(i)<0&&function(e){t.d(o,e,(function(){return r[e]}))}(i);t("5e5f");var a=t("f0c5"),d=Object(a["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);o["default"]=d.exports},d859:function(e,o,t){"use strict";t.d(o,"b",(function(){return n})),t.d(o,"c",(function(){return r})),t.d(o,"a",(function(){}));var n=function(){var e=this,o=e.$createElement,t=(e._self._c,e.__map(e.borrowBookList,(function(o,t){var n=e.__get_orig(o),r=e._f("toNull")(o.bookSeriesName),i=e._f("toTime")(o.borrowTimeText);return{$orig:n,f0:r,f1:i}}))),n=e.__map(e.memberBookOrderItemInfoList,(function(o,t){var n=e.__get_orig(o),r="Borrow"==o.bookOrderTypeCode?e._f("toNull")(o.bookSeriesName):null,i="Borrow"==o.bookOrderTypeCode?e._f("toTime")(o.createTimeText):null;return{$orig:n,f2:r,f3:i}})),r=e.__map(e.memberBookOrderItemInfoList,(function(o,t){var n=e.__get_orig(o),r="Return"==o.bookOrderTypeCode?e._f("toNull")(o.bookSeriesName):null,i="Return"==o.bookOrderTypeCode?e._f("toTime")(o.createTimeText):null;return{$orig:n,f4:r,f5:i}}));e.$mp.data=Object.assign({},{$root:{l0:t,l1:n,l2:r}})},r=[]},ef4d:function(e,o,t){"use strict";(function(e,o){var n=t("4ea4");t("7037");n(t("66fd"));var r=n(t("d521"));e.__webpack_require_UNI_MP_PLUGIN__=t,o(r.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])}},[["ef4d","common/runtime","common/vendor"]]]);