(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/booksDetail"],{"0c14":function(o,e,n){"use strict";n.d(e,"b",(function(){return t})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var t=function(){var o=this.$createElement,e=(this._self._c,this._f("ToIsOut")(this.bookInfo.isOut));this.$mp.data=Object.assign({},{$root:{f0:e}})},a=[]},6401:function(o,e,n){},"6c8c":function(o,e,n){"use strict";var t=n("6401"),a=n.n(t);a.a},9306:function(o,e,n){"use strict";(function(o,e){var t=n("4ea4");n("7037");t(n("66fd"));var a=t(n("a4ea"));o.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"9a24":function(o,e,n){"use strict";n.r(e);var t=n("cc45"),a=n.n(t);for(var i in t)["default"].indexOf(i)<0&&function(o){n.d(e,o,(function(){return t[o]}))}(i);e["default"]=a.a},a4ea:function(o,e,n){"use strict";n.r(e);var t=n("0c14"),a=n("9a24");for(var i in a)["default"].indexOf(i)<0&&function(o){n.d(e,o,(function(){return a[o]}))}(i);n("6c8c");var c=n("f0c5"),l=Object(c["a"])(a["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],void 0);e["default"]=l.exports},cc45:function(o,e,n){"use strict";(function(o){var t=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=t(n("448a")),i=t(n("c52e")),c=t(n("bd74")),l=(t(n("f0ad")),o.getSystemInfoSync().statusBarHeight),u=null,r={data:function(){return{url:"http://admin.8630.net/WYB/UploadFile/headerTopbg.png",imageRootUrl:c.default.imageRootUrl,adminRootUrl:c.default.adminRootUrl+"/",statusBarHeight:l,head_is_fixed:0,bookSkuID:"",bookInfo:{},booksList:[],loadingText:"正在加载...",showLoadMore:!1,pageIndex:0,pageSize:5,pageCount:0,list:[{id:1,name:"密码花园2",url:c.default.imageRootUrl+"image/common/bookb1.jpg"},{id:2,name:"安徒生童话全集2",url:c.default.imageRootUrl+"image/common/bookb2.jpg"},{id:3,name:"窗边的小豆豆2",url:c.default.imageRootUrl+"image/common/bookb3.jpg"},{id:4,name:"夏洛的网2",url:c.default.imageRootUrl+"image/common/bookb4.jpg"},{id:5,name:"柳林风声2",url:c.default.imageRootUrl+"image/common/bookb5.jpg"},{id:6,name:"格林童话2",url:c.default.imageRootUrl+"image/common/bookb6.jpg"},{id:5,name:"柳林风声2",url:c.default.imageRootUrl+"image/common/bookb7.jpg"}],old:{scrollTop:0}}},onReady:function(){},onShow:function(){},onPageScroll:function(o){u.head_is_fixed=o.scrollTop>0?1:0},onLoad:function(o){u=this,u.bookSkuID=o.bookSkuID,u.bindData()},methods:{bindData:function(){u.bindGetViewBook()},bindGetViewBook:function(){var o={};o.id=u.bookSkuID,i.default.call("GetViewBookSkuInfoList",o,(function(o){if(console.log(o),u.bookInfo=o.data.dataList[0],""!=u.bookInfo.introduction&&null!=u.bookInfo.introduction){var e=u.bookInfo.introduction,n=new RegExp("<img","g");console.log(n);var t=e.replace(n,'<img width="100%" ');console.log(t),u.bookInfo.introduction=t}else u.bookInfo.introduction="";u.bindbookSeries()}))},scroll:function(o){this.old.scrollTop=o.detail.scrollTop},clickToBack:function(){o.navigateBack()},bindbookSeries:function(){var o={};o.bookSeriesId=u.bookInfo.bookSeriesId,o.companyId=35,i.default.call("GetViewBookSkuList",o,(function(o){var e;(e=u.booksList).push.apply(e,(0,a.default)(o.data.dataList)),u.pageCount=o.data.pageCount,u.pageIndex=o.data.pageIndex,u.pageSize=o.data.pageSize,(0==u.booksList.length||u.booksList.length<=10)&&(u.loadingText="没有更多数据了")}))},lower:function(o){console.log("滚动到底部"),u.pageIndex+1==u.pageCount?u.loadingText="没有更多数据了":u.pageIndex+1<u.pageCount&&(u.pageIndex=u.pageIndex+1,u.showLoadMore=!0,u.loadingText="加载更多",u.bindbookSeries())},clickCollection:function(){var e={memberId:7};e.bookSkuId=u.bookSkuID,i.default.call("AddMemberBookmark",e,(function(e){console.log(e),o.showToast({title:"收藏成功！",icon:"none",duration:2500})}),(function(e){console.log(e),0==e.success&&o.showModal({title:"提示",content:e.errorMessage,showCancel:!1,confirmText:"确定"})}))},clickBorrow:function(){var e={memberId:7};e.book_sku_id=u.bookSkuID,e.fields="count(*) as count",i.default.call("GetViewBookOrderItemList",e,(function(e){e.data.dataList[0].count>0?o.showModal({title:"提示",content:"您已经借过了是否还要借",showCancel:!0,success:function(o){o.confirm&&u.Borrow()}}):u.Borrow()}))},Borrow:function(){var e={memberId:7,companyId:35};e.bookSkuId=u.bookSkuID,i.default.call("AddOnLineBorrowBookOrder",e,(function(e){console.log(e),o.showModal({title:"提示",content:"借阅成功！",showCancel:!1,confirmText:"确定"}),u.bindGetViewBook()}),(function(e){console.log(e),0==e.success&&o.showModal({title:"提示",content:e.errorMessage,showCancel:!1,confirmText:"确定"})}))},clickAddBorrowNotice:function(){var e={memberId:7};e.bookSkuId=u.bookSkuID,i.default.call("AddMemberBookSubscription",e,(function(e){console.log(e),o.showModal({title:"提示",content:"借阅成功！",showCancel:!1,confirmText:"确定"})}),(function(e){console.log(e),0==e.success&&o.showModal({title:"提示",content:e.errorMessage,showCancel:!1,confirmText:"确定"})}))},clickTobooksDetail:function(e){o.navigateTo({url:"booksDetail?bookSkuID="+e.id})}},filters:{ToIsOut:function(o){return null==o?"可借":1==o?"不可借":""}}};e.default=r}).call(this,n("543d")["default"])}},[["9306","common/runtime","common/vendor"]]]);