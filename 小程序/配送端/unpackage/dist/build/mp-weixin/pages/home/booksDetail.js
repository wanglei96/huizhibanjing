(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/booksDetail"],{2859:function(o,e,n){},3024:function(o,e,n){"use strict";n.r(e);var t=n("3c27"),a=n("5a97");for(var i in a)"default"!==i&&function(o){n.d(e,o,(function(){return a[o]}))}(i);n("38a6");var r,l=n("f0c5"),c=Object(l["a"])(a["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],r);e["default"]=c.exports},"38a6":function(o,e,n){"use strict";var t=n("2859"),a=n.n(t);a.a},"3c27":function(o,e,n){"use strict";var t;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return t}));var a=function(){var o=this,e=o.$createElement,n=(o._self._c,o._f("ToIsOut")(o.bookInfo.isOut));o.$mp.data=Object.assign({},{$root:{f0:n}})},i=[]},"5a97":function(o,e,n){"use strict";n.r(e);var t=n("5ce1"),a=n.n(t);for(var i in t)"default"!==i&&function(o){n.d(e,o,(function(){return t[o]}))}(i);e["default"]=a.a},"5ce1":function(o,e,n){"use strict";(function(o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(n("f619")),a=i(n("a51b"));i(n("c8b1"));function i(o){return o&&o.__esModule?o:{default:o}}function r(o){return d(o)||u(o)||c(o)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(o,e){if(o){if("string"===typeof o)return s(o,e);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(o,e):void 0}}function u(o){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(o))return Array.from(o)}function d(o){if(Array.isArray(o))return s(o)}function s(o,e){(null==e||e>o.length)&&(e=o.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=o[n];return t}var f=o.getSystemInfoSync().statusBarHeight,b=null,m={data:function(){return{url:"http://admin.8630.net/WYB/UploadFile/headerTopbg.png",imageRootUrl:a.default.imageRootUrl,adminRootUrl:a.default.adminRootUrl+"/",statusBarHeight:f,head_is_fixed:0,bookSkuID:"",bookInfo:{},booksList:[],loadingText:"正在加载...",showLoadMore:!1,pageIndex:0,pageSize:5,pageCount:0,list:[{id:1,name:"密码花园2",url:a.default.imageRootUrl+"image/common/bookb1.jpg"},{id:2,name:"安徒生童话全集2",url:a.default.imageRootUrl+"image/common/bookb2.jpg"},{id:3,name:"窗边的小豆豆2",url:a.default.imageRootUrl+"image/common/bookb3.jpg"},{id:4,name:"夏洛的网2",url:a.default.imageRootUrl+"image/common/bookb4.jpg"},{id:5,name:"柳林风声2",url:a.default.imageRootUrl+"image/common/bookb5.jpg"},{id:6,name:"格林童话2",url:a.default.imageRootUrl+"image/common/bookb6.jpg"},{id:5,name:"柳林风声2",url:a.default.imageRootUrl+"image/common/bookb7.jpg"}],old:{scrollTop:0}}},onReady:function(){},onShow:function(){},onPageScroll:function(o){b.head_is_fixed=o.scrollTop>0?1:0},onLoad:function(o){b=this,b.bookSkuID=o.bookSkuID,b.bindData()},methods:{bindData:function(){b.bindGetViewBook()},bindGetViewBook:function(){var o={};o.id=b.bookSkuID,t.default.call("GetViewBookSkuInfoList",o,(function(o){if(console.log(o),b.bookInfo=o.data.dataList[0],""!=b.bookInfo.introduction&&null!=b.bookInfo.introduction){var e=b.bookInfo.introduction,n=new RegExp("<img","g");console.log(n);var t=e.replace(n,'<img width="100%" ');console.log(t),b.bookInfo.introduction=t}else b.bookInfo.introduction="";b.bindbookSeries()}))},scroll:function(o){this.old.scrollTop=o.detail.scrollTop},clickToBack:function(){o.navigateBack()},bindbookSeries:function(){var o={};o.bookSeriesId=b.bookInfo.bookSeriesId,o.companyId=35,t.default.call("GetViewBookSkuList",o,(function(o){var e;(e=b.booksList).push.apply(e,r(o.data.dataList)),b.pageCount=o.data.pageCount,b.pageIndex=o.data.pageIndex,b.pageSize=o.data.pageSize,(0==b.booksList.length||b.booksList.length<=10)&&(b.loadingText="没有更多数据了")}))},lower:function(o){console.log("滚动到底部"),b.pageIndex+1==b.pageCount?b.loadingText="没有更多数据了":b.pageIndex+1<b.pageCount&&(b.pageIndex=b.pageIndex+1,b.showLoadMore=!0,b.loadingText="加载更多",b.bindbookSeries())},clickCollection:function(){var e={memberId:7};e.bookSkuId=b.bookSkuID,t.default.call("AddMemberBookmark",e,(function(e){console.log(e),o.showToast({title:"收藏成功！",icon:"none",duration:2500})}),(function(e){console.log(e),0==e.success&&o.showModal({title:"提示",content:e.errorMessage,showCancel:!1,confirmText:"确定"})}))},clickBorrow:function(){var e={memberId:7};e.book_sku_id=b.bookSkuID,e.fields="count(*) as count",t.default.call("GetViewBookOrderItemList",e,(function(e){e.data.dataList[0].count>0?o.showModal({title:"提示",content:"您已经借过了是否还要借",showCancel:!0,success:function(o){o.confirm&&b.Borrow()}}):b.Borrow()}))},Borrow:function(){var e={memberId:7,companyId:35};e.bookSkuId=b.bookSkuID,t.default.call("AddOnLineBorrowBookOrder",e,(function(e){console.log(e),o.showModal({title:"提示",content:"借阅成功！",showCancel:!1,confirmText:"确定"}),b.bindGetViewBook()}),(function(e){console.log(e),0==e.success&&o.showModal({title:"提示",content:e.errorMessage,showCancel:!1,confirmText:"确定"})}))},clickAddBorrowNotice:function(){var e={memberId:7};e.bookSkuId=b.bookSkuID,t.default.call("AddMemberBookSubscription",e,(function(e){console.log(e),o.showModal({title:"提示",content:"借阅成功！",showCancel:!1,confirmText:"确定"})}),(function(e){console.log(e),0==e.success&&o.showModal({title:"提示",content:e.errorMessage,showCancel:!1,confirmText:"确定"})}))},clickTobooksDetail:function(e){o.navigateTo({url:"booksDetail?bookSkuID="+e.id})}},filters:{ToIsOut:function(o){return null==o?"可借":1==o?"不可借":""}}};e.default=m}).call(this,n("543d")["default"])},db5a:function(o,e,n){"use strict";(function(o){n("0d5a");t(n("66fd"));var e=t(n("3024"));function t(o){return o&&o.__esModule?o:{default:o}}wx.__webpack_require_UNI_MP_PLUGIN__=n,o(e.default)}).call(this,n("543d")["createPage"])}},[["db5a","common/runtime","common/vendor"]]]);