(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/books/index"],{6913:function(e,o,t){"use strict";t.r(o);var n=t("7c5f"),r=t.n(n);for(var a in n)"default"!==a&&function(e){t.d(o,e,(function(){return n[e]}))}(a);o["default"]=r.a},"7c5f":function(e,o,t){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=i(t("f619")),r=i(t("a51b")),a=i(t("c8b1"));function i(e){return e&&e.__esModule?e:{default:e}}var c=e.getSystemInfoSync().statusBarHeight,d=null,u={data:function(){return{url:"http://admin.8630.net/WYB/UploadFile/headerTopbg.png",imageRootUrl:r.default.imageRootUrl,adminRootUrl:r.default.adminRootUrl+"/",statusBarHeight:c,head_is_fixed:0,borrowedQuantity:0,borrowableQuantity:0,memberBookOrderItemInfoList:[],borrowBookList:[]}},onReady:function(){},onShow:function(){d.bindGetMemberBorrowBookList()},onPageScroll:function(e){d.head_is_fixed=e.scrollTop>0?1:0},onLoad:function(){d=this},methods:{bindGetMemberBorrowBookList:function(){var e={memberId:7,companyId:35};n.default.call("GetMemberBorrowBookList",e,(function(e){console.log(e.data),d.borrowedQuantity=e.data.borrowedQuantity,d.borrowableQuantity=e.data.borrowableQuantity,d.memberBookOrderItemInfoList=e.data.bookOrderItemInfoList,d.borrowBookList=e.data.bookList;for(var o=0;o<d.memberBookOrderItemInfoList.length;o++){var t=d.memberBookOrderItemInfoList[o];t.remainSeconds=60*t.minutes+t.seconds}var n=d.computeRemainSeconds();n&&d.countDown();for(var r=0;r<d.memberBookOrderItemInfoList.length;r++)if("Return"==d.memberBookOrderItemInfoList[r].bookOrderTypeCode)for(var a=d.borrowBookList.length-1;a>=0;a--)d.borrowBookList[a].id==d.memberBookOrderItemInfoList[r].bookId&&d.borrowBookList.splice(a,1)}))},computeRemainSeconds:function(){for(var e=!1,o=0;o<d.memberBookOrderItemInfoList.length;o++){var t=d.memberBookOrderItemInfoList[o],n=d.getRemainSeconds(t),r=parseInt(n/60),a=parseInt(n%60);n-1>0?(t.remainTime=(r<10?"0":"")+(r>0?r+":":"")+(a<10?"0":"")+a,t.remainSeconds=n-1):t.remainSeconds=0,n>0&&(e=!0)}return d.$forceUpdate(),e},countDown:function(){setTimeout((function(){var e=d.computeRemainSeconds();e&&d.countDown()}),1e3)},getRemainSeconds:function(e){var o=new Date,t=a.default.strToDate(e.createTimeText),n=(t.getTime()-o.getTime())/1e3;return n=n>0?n:0,n},clickCancelBooks:function(o){var t={};t.bookId=o.bookId,t.memberId=7,t.companyId=35,n.default.call("CancelledOnlineBorrowBookOrder",t,(function(o){console.log(o.data),e.showModal({title:"提示",content:"取消借书成功！",showCancel:!1,success:function(e){e.confirm&&d.bindGetMemberBorrowBookList()}})}))},clickAddOnLineReturnBookOrder:function(o,t){var r={};r.bookId=o.id,r.memberId=7,r.companyId=35,n.default.call("AddOnLineReturnBookOrder",r,(function(o){console.log(o.data),e.showModal({title:"提示",content:"还书成功！",showCancel:!1,success:function(e){e.confirm&&d.bindGetMemberBorrowBookList()}})}))},clickCancelledOnlineReturnBookOrder:function(o,t){var r={};r.bookOrderItemId=o.id,n.default.call("CancelledOnlineReturnBookOrder",r,(function(o){console.log(o.data),e.showModal({title:"提示",content:"取消成功！",showCancel:!1,success:function(e){e.confirm&&d.bindGetMemberBorrowBookList()}})}))}},filters:{toTime:function(e){var o=new Date(e),t=o.getFullYear(),n=o.getMonth()+1,r=o.getDate();return t+"年"+n+"月"+r+"日"}}};o.default=u}).call(this,t("543d")["default"])},acdc:function(e,o,t){"use strict";var n=t("d498"),r=t.n(n);r.a},cc69:function(e,o,t){"use strict";t.r(o);var n=t("ec37"),r=t("6913");for(var a in r)"default"!==a&&function(e){t.d(o,e,(function(){return r[e]}))}(a);t("acdc");var i,c=t("f0c5"),d=Object(c["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);o["default"]=d.exports},d498:function(e,o,t){},ec37:function(e,o,t){"use strict";var n;t.d(o,"b",(function(){return r})),t.d(o,"c",(function(){return a})),t.d(o,"a",(function(){return n}));var r=function(){var e=this,o=e.$createElement,t=(e._self._c,e.__map(e.memberBookOrderItemInfoList,(function(o,t){var n=e.__get_orig(o),r="Borrow"==o.bookOrderTypeCode?e._f("toTime")(o.createTimeText):null;return{$orig:n,f0:r}}))),n=e.__map(e.memberBookOrderItemInfoList,(function(o,t){var n=e.__get_orig(o),r="Return"==o.bookOrderTypeCode?e._f("toTime")(o.createTimeText):null;return{$orig:n,f1:r}}));e.$mp.data=Object.assign({},{$root:{l0:t,l1:n}})},a=[]},f73b:function(e,o,t){"use strict";(function(e){t("0d5a");n(t("66fd"));var o=n(t("cc69"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(o.default)}).call(this,t("543d")["createPage"])}},[["f73b","common/runtime","common/vendor"]]]);