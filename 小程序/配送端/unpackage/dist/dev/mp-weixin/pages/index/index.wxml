<view><view class="content-view"><view class="labelView" style="position:fixed;background-color:#5EAC59;z-index:1;color:#ffffff;height:50rpx;"><view data-event-opts="{{[['tap',[['showCity']]]]}}" class="itemSty" style="align-items:center;" bindtap="__e">{{'日期选择：'+$root.f0}}<image style="width:30rpx;height:30rpx;margin-left:2rpx;" src="../../static/triangle.png"></image></view></view><view class="h50"></view><block wx:if="{{isBookPicker==true&&isDistribution==false}}"><view><view class="labelView" style="position:fixed;background-color:#5EAC59;z-index:1;"><view data-event-opts="{{[['tap',[['changeBookPickerActive',[0]]]]]}}" class="{{['itemSty',(bookPickerActive==0)?'SeItem':'']}}" bindtap="__e">待拣书单(待拣<label class="{{['span','_span',(returnNumber==0)?'span1':'']}}">{{returnNumber}}</label>)</view><view style="{{'left:'+('calc('+(bookPickerActive==0?50:0)+'% - 25px)')+';'}}" class="_p"></view></view><view style="height:80rpx;"></view><view hidden="{{!(wayShow)}}" class="wayTable"><block wx:for="{{bookCaseDetailList}}" wx:for-item="item" wx:for-index="bookCaseIndex" wx:key="bookCaseIndex"><view><view class="bookcase">{{'书柜：'+item.bookcaseName+'号'}}</view><view class="_table"><view class="_thead"><view class="_tr"><view class="_th">序号</view><view class="_th">书名</view><view class="_th">图书编号</view></view></view><view class="_tbody"><block wx:for="{{item.children}}" wx:for-item="ite" wx:for-index="bookSkuIndex" wx:key="bookSkuIndex"><view class="_tr"><view class="_td">{{ite.no}}</view><view class="_td">{{ite.bookName}}</view><view class="_td">{{ite.bookSn}}</view></view></block></view></view></view></block></view><view style="height:20rpx;"></view><view hidden="{{!(!wayShow)}}" class="listView" id="NumInfo"><view style="display:flex;flex-wrap:wrap;background-color:#fff;padding:5rpx;border-radius:20rpx;margin-bottom:10rpx;"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['bindAreaBookOutOrderInfoList',['$0'],[[['bookOutOrderAreaList','',index,'deliverAreaId']]]]]]]}}" class="{{['line80',(item.$orig.deliverAreaId==bookOutOrderAreaId)?'c_red':'']}}" style="margin-left:10rpx;font-weight:600;display:flex;flex-wrap:wrap;" bindtap="__e"><view class="f29">{{item.$orig.deliverAreaName+"："+item.$orig.count}}</view><block wx:if="{{index!=item.g0-1}}"><view class="f29" style="margin-left:10rpx;">|</view></block></view></block><view class="f26 line80" style="margin-left:25rpx;"><checkbox checked="{{isShowUntreated}}" data-event-opts="{{[['tap',[['onCheckboxChange']]]]}}" bindtap="__e">只显示未处理</checkbox></view></view><block wx:for="{{$root.l2}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="liView"><view class="info"><view class="item" style="color:rgb(0, 128, 0);font-weight:normal;">{{item.$orig.deliverAreaName}}</view><view class="top"><view class="item"><label class="_span">姓名：</label>{{item.$orig.memberName}}</view><image style="{{'transform:'+('rotate('+(item.$orig.open?-180:0)+'deg)')+';'}}" src="{{item.m0}}" alt data-event-opts="{{[['tap',[['openClick',[index]]]]]}}" bindtap="__e" class="_img"></image></view><view class="item"><label class="_span">地址：</label>{{item.$orig.address}}</view><view class="item"><image style="width:40rpx;height:40rpx;" src="{{item.m1}}" alt class="_img"></image>{{item.$orig.memberMobilePhone}}</view><view class="tips">{{"共"+item.$orig.pickTotal+"本，（已拣"}}<label class="_span">{{item.$orig.yPicKNum}}</label>本，未拣<label class="_span">{{item.$orig.nPicKNum}}</label>本)</view><view class="openListView" style="{{'max-height:'+(item.$orig.open?'2000px':'0')+';'}}"><block wx:for="{{item.l1}}" wx:for-item="li" wx:for-index="childrenindex" wx:key="childrenindex"><view class="openView"><image style="height:210rpx;display:block;width:25%;border:2rpx solid rgb(211 211 211);border-radius:10rpx;" src="{{li.f1}}" alt mode="aspectFit"></image><view class="news" style="margin-left:10rpx;"><view class="title"><block wx:if="{{li.$orig.bookSeriesName!=''&&li.$orig.bookSeriesName!=''}}"><text class="f26" style="color:rgb(0, 128, 0);font-weight:normal;">{{"["+li.$orig.bookSeriesName+"]"}}</text></block>{{''+li.$orig.bookName+''}}<text class="f26" style="color:rgb(0, 0, 255);font-weight:normal;">{{"("+li.$orig.bindingTypeName+")"}}</text></view><view class="f30 line70" style="color:#5EAC59;"><label class="f30 _span">书号:</label>{{li.$orig.bookSn+''}}</view><view class="f30" style="color:#5EAC59;display:flex;align-items:center;flex-wrap:wrap;"><view style="width:calc(100% - 160rpx);"><label class="f26 _span">位置:</label>{{li.$orig.bookcaseName+''}}</view><view class="butt" style="width:160rpx;"><block wx:if="{{li.$orig.bookOutOrderStatusCode=='NotFound'}}"><view data-event-opts="{{[['tap',[['clickFindMe',['$0',index,childrenindex],[[['PickBookList','',index],['children','',childrenindex]]]]]]]}}" class="returnbook" bindtap="__e">找到点我</view></block><block wx:if="{{li.$orig.bookOutOrderStatusCode=='Found'}}"><view class="cancelbooks">已拣</view></block></view></view></view></view></block></view></view></view></block></view><view style="height:50px;"></view></view></block><block wx:else><view><view class="labelView" style="position:fixed;background-color:#5EAC59;z-index:1;"><block wx:if="{{isDistribution==true}}"><view data-event-opts="{{[['tap',[['changeActive',[0]]]]]}}" class="{{['itemSty',(active==0)?'SeItem':'']}}" bindtap="__e">配送单（待配送）<label class="{{['span','_span',(borrowNumber==0)?'span1':'']}}">{{borrowNumber}}</label></view></block><block wx:if="{{isDistribution==true&&isBookPicker==true}}"><view data-event-opts="{{[['tap',[['changeActive',[1]]]]]}}" class="{{['itemSty',(active==1)?'SeItem':'']}}" bindtap="__e">拣书单（待拣书）<label class="{{['span','_span',(returnNumber==0)?'span1':'']}}">{{returnNumber}}</label></view></block><block wx:if="{{isDistribution==true&&isBookPicker==false}}"><view style="{{'left:'+('calc('+(active==0?50:50)+'% - 25px)')+';'}}" class="_p"></view></block><block wx:if="{{isDistribution==true&&isBookPicker==true}}"><view style="{{'left:'+('calc('+(active==0?25:75)+'% - 25px)')+';'}}" class="_p"></view></block></view><view style="height:90rpx;"></view><block wx:if="{{active==0}}"><view class="listView" id="NumInfo"><block wx:if="{{$root.g1>0}}"><view style="display:flex;flex-wrap:wrap;background-color:#fff;padding:5rpx;border-radius:20rpx;margin-bottom:10rpx;"><block wx:for="{{$root.l3}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['bindAreaDeliveryOrderInfoList',['$0'],[[['deliverOrderAreaTotalList','',index,'deliverAreaId']]]]]]]}}" class="{{['line80',(item.$orig.deliverAreaId==deliverAreaId)?'c_red':'']}}" style="margin-left:10rpx;font-weight:600;display:flex;flex-wrap:wrap;" bindtap="__e"><view class="f29 line80">{{item.$orig.deliverAreaName+"："+item.$orig.count}}</view><block wx:if="{{index!=item.g2-1}}"><view class="f29 line80" style="margin-left:10rpx;">|</view></block></view></block><view class="f26 line80" style="margin-left:25rpx;"><checkbox checked="{{isShowUntreated}}" data-event-opts="{{[['tap',[['onCheckboxChange']]]]}}" bindtap="__e">只显示未处理</checkbox></view></view></block><block wx:for="{{$root.l5}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="liView" style="display:block;"><view class="info" style="float:left;width:calc(100% - 120px);"><view class="item f30" style="color:rgb(0, 128, 0);font-weight:normal;font-size:40rpx;">{{item.$orig.deliverAreaName}}</view><view class="f35" style="font-weight:600;"><block wx:if="{{item.$orig.memberEntranceGuard!=''}}"><text class="b c_blue f30">{{"["+item.$orig.memberEntranceGuard+"]"}}</text></block>{{item.$orig.memberAddress}}</view><view data-event-opts="{{[['tap',[['clickCallPhone',['$0'],[[['deliveryBookOrderList','',index]]]]]]]}}" class="item b f35" bindtap="__e">{{''+item.$orig.memberName+" "+item.$orig.memberMobilePhone}}</view><view data-event-opts="{{[['tap',[['deliveryBookOpenClick',[index]]]]]}}" class="tips" catchtap="__e">送<text style="color:#FACC3F;font-weight:bold;">{{item.$orig.sendCount}}</text>本，取<text class="c_red b">{{item.$orig.fetchCount}}</text>本 点击核对</view></view><view class="butt" style="float:right;"><view data-event-opts="{{[['tap',[['clickMoveUp',['$0',index,'MoveUp'],[[['deliveryBookOrderList','',index]]]]]]]}}" style="{{'background-color:'+(index!=0?'#FACC3F':'gray')+';'+('color:'+('#ffffff')+';')}}" catchtap="__e">上移</view><view data-event-opts="{{[['tap',[['clickMoveDown',['$0',index,'MoveDown'],[[['deliveryBookOrderList','',index]]]]]]]}}" style="{{'background-color:'+(index+1!=item.g3?'#FACC3F':'gray')+';'+('color:'+('#ffffff')+';')}}" catchtap="__e">下移</view><block wx:if="{{item.$orig.bookOrderBorrowStatusCode==='Delivering'||item.$orig.bookOrderBorrowStatusCode==='ErrorProcessing'||item.$orig.bookOrderBorrowStatusCode==='Retrieving'}}"><view data-event-opts="{{[['tap',[['clickDeliverBookOrderReceived',['$0',index],[[['deliveryBookOrderList','',index]]]]]]]}}" catchtap="__e">送达点我</view></block><block wx:else><block wx:if="{{item.$orig.bookOrderBorrowStatusCode==='Submitting'||item.$orig.bookOrderBorrowStatusCode==='StockOuting'}}"><view style="background-color:gray;color:white;">待拣书</view></block><block wx:else><view style="background-color:gray;color:white;">已送达</view></block></block></view><view style="clear:both;"></view><view class="openListView" style="{{'border:0;margin:0;'+('max-height:'+(item.$orig.open?'2000px':'0')+';')}}"><view class="openView line80" style="margin-top:15rpx;border-bottom:1px solid rgba(236, 237, 239, 1);padding:10rpx;"><view class="news b f28">书名</view><view class="butt b f28 center" style="width:75rpx;">状态</view></view><block wx:for="{{item.l4}}" wx:for-item="li" wx:for-index="bookindex" wx:key="bookindex"><view class="openView" style="{{'margin-top:15rpx;border-bottom:1px solid rgba(236, 237, 239, 1);padding:10rpx;'+('background-color:'+(li.$orig.bookOrderTypeName=='借书'?'#d9edf7':'')+';')}}"><view class="news"><view class="title f27 line50" style="-webkit-line-clamp:1;height:50rpx;line-height:50rpx;">{{''+li.$orig.bookName+''}}</view><view class="f27 line50">{{''+li.f2+''}}</view></view><view class="butt f27 center line100"><block wx:if="{{li.$orig.bookOrderTypeName=='还书'&&li.$orig.deliverStatusName=='等待配送'}}"><block>等待取书</block></block><block wx:else><block>{{''+li.f3+''}}</block></block></view></view></block></view><view style="clear:both;"></view></view></block></view></block><block wx:if="{{active==1}}"><view class="listView" id="NumInfo"><block wx:if="{{$root.g4>0}}"><view style="display:flex;flex-wrap:wrap;background-color:#fff;padding:5rpx;border-radius:20rpx;margin-bottom:10rpx;"><block wx:for="{{$root.l6}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['bindAreaBookOutOrderInfoList',['$0'],[[['bookOutOrderAreaList','',index,'deliverAreaId']]]]]]]}}" class="{{['line80',(item.$orig.deliverAreaId==bookOutOrderAreaId)?'c_red':'']}}" style="margin-left:10rpx;font-weight:600;display:flex;flex-wrap:wrap;" bindtap="__e"><view class="f29">{{item.$orig.deliverAreaName+"："+item.$orig.count}}</view><block wx:if="{{index!=item.g5-1}}"><view class="f29" style="margin-left:10rpx;">|</view></block></view></block><view class="f26 line80" style="margin-left:25rpx;"><checkbox checked="{{isShowUntreated}}" data-event-opts="{{[['tap',[['onCheckboxChange']]]]}}" bindtap="__e">只显示未处理</checkbox></view></view></block><block wx:for="{{$root.l8}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="liView"><view class="info"><view class="item" style="color:rgb(0, 128, 0);font-weight:normal;">{{item.$orig.deliverAreaName}}</view><view class="top"><view class="item"><label class="_span">姓名：</label>{{item.$orig.memberName}}</view><image style="{{'transform:'+('rotate('+(item.$orig.open?-180:0)+'deg)')+';'}}" src="{{item.m2}}" alt data-event-opts="{{[['tap',[['openClick',[index]]]]]}}" bindtap="__e" class="_img"></image></view><view class="item"><label class="_span">地址：</label>{{item.$orig.address}}</view><view class="item"><image style="width:40rpx;height:40rpx;" src="{{item.m3}}" alt class="_img"></image>{{item.$orig.memberMobilePhone}}</view><view data-event-opts="{{[['tap',[['openClick',[index]]]]]}}" class="tips" bindtap="__e">{{'共'+item.$orig.pickTotal+"本，（已拣"}}<label class="_span">{{item.$orig.yPicKNum}}</label>本，未拣<label class="_span">{{item.$orig.nPicKNum}}</label>本)</view><view class="openListView" style="{{'max-height:'+(item.$orig.open?'2000px':'0')+';'}}"><block wx:for="{{item.l7}}" wx:for-item="li" wx:for-index="childrenindex" wx:key="childrenindex"><view class="openView"><image style="height:210rpx;display:block;width:25%;border:2rpx solid rgb(211 211 211);border-radius:10rpx;" src="{{li.f4}}" alt mode="aspectFit"></image><view class="news"><view class="title"><block wx:if="{{li.$orig.bookSeriesName!=''&&li.$orig.bookSeriesName!=''}}"><text class="f26" style="color:rgb(0, 128, 0);font-weight:normal;">{{"["+li.$orig.bookSeriesName+"]"}}</text></block>{{''+li.$orig.bookName+''}}<text class="f26" style="color:rgb(0, 0, 255);font-weight:normal;">{{"("+li.$orig.bindingTypeName+")"}}</text></view><view class="f30 line70" style="color:#5EAC59;"><label class="f30 _span">书号:</label>{{li.$orig.bookSn+''}}</view><view class="f30" style="color:#5EAC59;display:flex;align-items:center;flex-wrap:wrap;"><view style="width:calc(100% - 160rpx);"><label class="f26 _span">位置:</label>{{li.$orig.bookcaseName+''}}</view><view class="butt" style="width:160rpx;"><block wx:if="{{li.$orig.bookOutOrderStatusCode=='NotFound'}}"><view data-event-opts="{{[['tap',[['clickFindMe',['$0',index,childrenindex],[[['PickBookList','',index],['children','',childrenindex]]]]]]]}}" class="returnbook" bindtap="__e">找到点我</view></block><block wx:if="{{li.$orig.bookOutOrderStatusCode=='Found'}}"><view class="cancelbooks">已拣</view></block></view></view></view></view></block></view></view></view></block></view></block><view style="height:50px;"></view></view></block><uni-popup class="vue-ref" vue-id="8dd740cc-1" type="center" background-color="#fff" data-ref="popup" bind:__l="__l" vue-slots="{{['default']}}"><uni-popup-dialog class="vue-ref" vue-id="{{('8dd740cc-2')+','+('8dd740cc-1')}}" title="送达点我" data-ref="inputClose" data-event-opts="{{[['^confirm',[['dialogInputConfirm']]],['^close',[['dialogInputclose']]]]}}" bind:confirm="__e" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="popupSty"><view style="padding-top:5px;">异常备注<view class="_br"></view>(无异常不用填写)</view><view><uni-easyinput bind:input="__e" style="margin-left:10px;" vue-id="{{('8dd740cc-3')+','+('8dd740cc-2')}}" placeholder="请填写异常情况" value="{{other}}" data-event-opts="{{[['^input',[['__set_model',['','other','$event',[]]]]]]}}" bind:__l="__l"></uni-easyinput></view></view></uni-popup-dialog></uni-popup><view hidden="{{!(IsCalendarPopup)}}" class="calendarPopup"><view class="mask"></view><view class="contents"><ren-calendar class="vue-ref" vue-id="8dd740cc-4" markDays="{{markDays}}" open="{{true}}" disabledAfter="{{true}}" data-ref="ren" data-event-opts="{{[['^onDayClick',[['onDayClick']]]]}}" bind:onDayClick="__e" bind:__l="__l"></ren-calendar></view></view></view></view>